import{s as q,f as y,o,S as g,b as v,e as t,a,w as r,P as l,c,n as w,q as B,t as $}from"./index-t5JGJ5mJ.js";import{_ as n}from"./delayedTooltip-CqlKm7RO.js";import{u as M}from"./useStatus-DKs5K0qi.js";import{u as b}from"./usePlayer-Dj9B0Ku-.js";import{socket as P}from"./socketio-BbzW_8DD.js";import{Q as F}from"./QSlider-Btc94NDu.js";const T={class:"row no-wrap justify-center items-center q-mb-sm q-gutter-x-md"},h={key:0},N={key:1},I={__name:"controlBtns",setup(u){const{pStatus:e}=q(M()),{fnPlay:f,fnStop:d,fnPause:m,fnSetFullscreen:_}=b(),p=()=>{e.value.repeat==="none"?e.value.repeat="all":e.value.repeat==="all"?e.value.repeat=e.value.playlistMode?"repeat_one":"none":e.value.playlistMode&&e.value.repeat==="repeat_one"?e.value.repeat="single":e.value.repeat==="single"&&(e.value.repeat="none"),P.emit("event",{type:"repeat",value:e.value.repeat})};return(x,s)=>(o(),y("div",T,[t(e).playlistMode?(o(),y("div",h,[a(l,{flat:"",round:"",icon:"fast_rewind",color:"primary"},{default:r(()=>[a(n,{msg:"Rewind"})]),_:1})])):g("",!0),v("div",null,[t(e).player.playing!==1?(o(),c(l,{key:0,flat:"",round:"",icon:"play_arrow",color:"primary",onClick:s[0]||(s[0]=i=>t(f)())},{default:r(()=>[a(n,{msg:"Play"})]),_:1})):(o(),c(l,{key:1,flat:"",round:"",icon:"pause",color:"primary",onClick:t(m)},{default:r(()=>[a(n,{msg:"Pause"})]),_:1},8,["onClick"]))]),v("div",null,[a(l,{flat:"",round:"",icon:"stop",color:"red-10",onClick:s[1]||(s[1]=i=>t(d)())},{default:r(()=>[a(n,{msg:"Stop"})]),_:1})]),t(e).playlistMode?(o(),y("div",N,[a(l,{flat:"",round:"",icon:"fast_forward",color:"primary"},{default:r(()=>[a(n,{msg:"Forward"})]),_:1})])):g("",!0),v("div",null,[t(e).repeat==="none"?(o(),c(l,{key:0,flat:"",round:"",icon:"repeat",color:"grey-5",onClick:p},{default:r(()=>[a(n,{msg:"None"})]),_:1})):t(e).repeat==="all"?(o(),c(l,{key:1,flat:"",round:"",icon:"repeat",color:"primary",onClick:p},{default:r(()=>[a(n,{msg:"Repeat"})]),_:1})):t(e).playlistMode&&t(e).repeat==="repeat_one"?(o(),c(l,{key:2,flat:"",round:"",icon:"repeat_one",color:"primary",onClick:p},{default:r(()=>[a(n,{msg:"Repeat One"})]),_:1})):t(e).repeat==="single"?(o(),c(l,{key:3,flat:"",round:"",icon:"looks_one",color:"primary",onClick:p},{default:r(()=>[a(n,{msg:"Single"})]),_:1})):g("",!0)]),v("div",null,[t(e).player&&t(e).player.fullscreen?(o(),c(l,{key:0,flat:"",round:"",icon:"fullscreen_exit",color:"primary",onClick:s[2]||(s[2]=i=>t(_)(!t(e).player.fullscreen))},{default:r(()=>[a(n,{msg:"Exit Fullscreen"})]),_:1})):(o(),c(l,{key:1,flat:"",round:"",icon:"fullscreen",color:"primary",onClick:s[3]||(s[3]=i=>t(_)(!t(e).player.fullscreen))},{default:r(()=>[a(n,{msg:"Fullscreen"})]),_:1}))])]))}},k=u=>u.toString().padStart(2,"0"),S=u=>{if(!Number.isFinite(u)||u<0)return"00:00:00";let e=Math.floor(u);const f=Math.floor(e/3600)%24,d=Math.floor(e%3600/60),m=e%60;return`${k(f)}:${k(d)}:${k(m)}`},R={class:"row no-wrap q-pt-none q-mt-none q-px-md q-gutter-x-sm items-center"},V={key:0,class:"gt-xs text-caption"},O={__name:"timeSlider",props:{time:{type:Boolean,default:!0}},setup(u){const{pStatus:e}=q(M()),{fnUpdateTime:f}=b(),d=w(0),m=w(!1),_=u,p=B(()=>e.value.current?.is_image),x=i=>{d.value=i,!m.value&&!p.value&&f(d.value)},s=i=>{try{if(p.value)return;i==="start"?m.value=!0:i==="end"&&(m.value=!1,f(d.value))}catch(C){console.error("Error during panning:",C)}};return(i,C)=>(o(),y("div",R,[a(F,{class:"q-mt-none q-pt-none","model-value":t(e).player.time/1e3,min:0,step:.01,max:t(e).player.duration/1e3,label:"","label-value":t(S)(t(e).player.time/1e3),"onUpdate:modelValue":x,onPan:s,disable:p.value},null,8,["model-value","max","label-value","disable"]),_.time?(o(),y("div",V,$(t(S)(t(e).player.time/1e3))+"/"+$(t(S)(t(e).player.duration/1e3)),1)):g("",!0)]))}};export{O as _,I as a,S as m};
