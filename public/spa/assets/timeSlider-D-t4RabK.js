import{s as B,f as $,g as v,o as a,S as g,b as y,e as t,a as o,w as n,P as l,c as f,p as q,t as h}from"./index-BX304G0J.js";import{_ as s}from"./delayedTooltip-D2WBfrjM.js";import{u as M}from"./useStatus-C5se4lkC.js";import{u as N}from"./usePlayer-CVxnY945.js";import{Q as R}from"./QSlider-CPhbS-ap.js";const T={class:"row no-wrap justify-center items-center q-mb-sm q-gutter-x-md"},F={key:0},V={key:1},O={__name:"controlBtns",setup(i){const{pStatus:e}=B(M()),{fnPlay:m,fnStop:c,fnPause:d,fnSetFullscreen:k,fnPrev:u,fnNext:_,setRepeat:S}=N(),x=$(()=>e.value.player?.[e.value.activePlayerId]||{time:0,duration:0,file:{},is_playing:0}),r=async()=>{await S()};return(C,p)=>(a(),v("div",T,[t(e).playlistMode?(a(),v("div",F,[o(l,{flat:"",round:"",icon:"fast_rewind",color:"primary",onClick:t(u)},{default:n(()=>[o(s,{msg:"Rewind"})]),_:1},8,["onClick"])])):g("",!0),y("div",null,[x.value.is_playing!==1?(a(),f(l,{key:0,flat:"",round:"",icon:"play_arrow",color:"primary",onClick:p[0]||(p[0]=b=>t(m)())},{default:n(()=>[o(s,{msg:"Play"})]),_:1})):(a(),f(l,{key:1,flat:"",round:"",icon:"pause",color:"primary",onClick:t(d)},{default:n(()=>[o(s,{msg:"Pause"})]),_:1},8,["onClick"]))]),y("div",null,[o(l,{flat:"",round:"",icon:"stop",color:"red-10",onClick:p[1]||(p[1]=b=>t(c)())},{default:n(()=>[o(s,{msg:"Stop"})]),_:1})]),t(e).playlistMode?(a(),v("div",V,[o(l,{flat:"",round:"",icon:"fast_forward",color:"primary",onClick:t(_)},{default:n(()=>[o(s,{msg:"Next"})]),_:1},8,["onClick"])])):g("",!0),y("div",null,[t(e).repeat==="none"?(a(),f(l,{key:0,flat:"",round:"",icon:"repeat",color:"grey-5",onClick:r},{default:n(()=>[o(s,{msg:"None"})]),_:1})):t(e).repeat==="all"?(a(),f(l,{key:1,flat:"",round:"",icon:"repeat",color:"primary",onClick:r},{default:n(()=>[o(s,{msg:"Repeat"})]),_:1})):t(e).playlistMode&&t(e).repeat==="repeat_one"?(a(),f(l,{key:2,flat:"",round:"",icon:"repeat_one",color:"primary",onClick:r},{default:n(()=>[o(s,{msg:"Repeat One"})]),_:1})):t(e).repeat==="single"?(a(),f(l,{key:3,flat:"",round:"",icon:"looks_one",color:"primary",onClick:r},{default:n(()=>[o(s,{msg:"Single"})]),_:1})):g("",!0)]),y("div",null,[o(l,{flat:"",round:"",icon:t(e)&&t(e).fullscreen?"fullscreen_exit":"fullscreen",color:"primary",onClick:p[2]||(p[2]=b=>t(k)(!t(e).fullscreen))},{default:n(()=>[o(s,{msg:t(e)&&t(e).fullscreen?"Exit Fullscreen":"Fullscreen"},null,8,["msg"])]),_:1},8,["icon"])])]))}},w=i=>i.toString().padStart(2,"0"),P=i=>{if(!Number.isFinite(i)||i<0)return"00:00:00";let e=Math.floor(i);const m=Math.floor(e/3600)%24,c=Math.floor(e%3600/60),d=e%60;return`${w(m)}:${w(c)}:${w(d)}`},E={class:"row no-wrap q-pt-none q-mt-none q-px-md q-gutter-x-sm items-center"},I={key:0,class:"gt-xs text-caption"},z={__name:"timeSlider",props:{time:{type:Boolean,default:!0}},setup(i){const{pStatus:e}=B(M()),{fnUpdateTime:m}=N(),c=q(0),d=q(!1),k=i,u=$(()=>e.value.player?.[e.value.activePlayerId]||{time:0,duration:0,file:{}}),_=$(()=>u.value?.file?.is_image??!1),S=r=>{c.value=r,!d.value&&!_.value&&m(c.value)},x=r=>{try{if(_.value)return;r==="start"?d.value=!0:r==="end"&&(d.value=!1,m(c.value))}catch(C){console.error("Error during panning:",C)}};return(r,C)=>(a(),v("div",E,[o(R,{class:"q-mt-none q-pt-none","model-value":u.value.time/1e3,min:0,step:.01,max:u.value.duration/1e3,label:"","label-value":t(P)(u.value.time/1e3),"onUpdate:modelValue":S,onPan:x,disable:_.value},null,8,["model-value","max","label-value","disable"]),k.time?(a(),v("div",I,h(t(P)(u.value.time/1e3))+"/"+h(t(P)(u.value.duration/1e3)),1)):g("",!0)]))}};export{z as _,O as a,P as m};
