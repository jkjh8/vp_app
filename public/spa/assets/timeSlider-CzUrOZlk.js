import{s as q,f as P,g as y,o as l,S as k,b as g,e as t,a,w as o,P as r,c as v,p as M,t as b}from"./index-78DP7nM4.js";import{_ as n}from"./delayedTooltip-BrrD4Y1h.js";import{u as h}from"./useStatus-CgdTaDZ3.js";import{u as B}from"./usePlayer-BMcg5vSe.js";import{socket as N}from"./socketio-BnBUGg6T.js";import{Q as T}from"./QSlider-BtWvHH5C.js";const F={class:"row no-wrap justify-center items-center q-mb-sm q-gutter-x-md"},R={key:0},V={key:1},z={__name:"controlBtns",setup(i){const{pStatus:e}=q(h()),{fnPlay:d,fnStop:c,fnPause:p,fnSetFullscreen:S,fnPrev:u,fnNext:_}=B(),x=P(()=>e.value.player?.[e.value.activePlayerId]||{time:0,duration:0,file:{},is_playing:0}),m=()=>{e.value.repeat==="none"?e.value.repeat="all":e.value.repeat==="all"?e.value.repeat=e.value.playlistMode?"repeat_one":"none":e.value.playlistMode&&e.value.repeat==="repeat_one"?e.value.repeat="single":e.value.repeat==="single"&&(e.value.repeat="none"),N.emit("event",{type:"repeat",value:e.value.repeat})};return(f,s)=>(l(),y("div",F,[t(e).playlistMode?(l(),y("div",R,[a(r,{flat:"",round:"",icon:"fast_rewind",color:"primary",onClick:t(u)},{default:o(()=>[a(n,{msg:"Rewind"})]),_:1},8,["onClick"])])):k("",!0),g("div",null,[x.value.is_playing!==1?(l(),v(r,{key:0,flat:"",round:"",icon:"play_arrow",color:"primary",onClick:s[0]||(s[0]=$=>t(d)())},{default:o(()=>[a(n,{msg:"Play"})]),_:1})):(l(),v(r,{key:1,flat:"",round:"",icon:"pause",color:"primary",onClick:t(p)},{default:o(()=>[a(n,{msg:"Pause"})]),_:1},8,["onClick"]))]),g("div",null,[a(r,{flat:"",round:"",icon:"stop",color:"red-10",onClick:s[1]||(s[1]=$=>t(c)())},{default:o(()=>[a(n,{msg:"Stop"})]),_:1})]),t(e).playlistMode?(l(),y("div",V,[a(r,{flat:"",round:"",icon:"fast_forward",color:"primary",onClick:t(_)},{default:o(()=>[a(n,{msg:"Next"})]),_:1},8,["onClick"])])):k("",!0),g("div",null,[t(e).repeat==="none"?(l(),v(r,{key:0,flat:"",round:"",icon:"repeat",color:"grey-5",onClick:m},{default:o(()=>[a(n,{msg:"None"})]),_:1})):t(e).repeat==="all"?(l(),v(r,{key:1,flat:"",round:"",icon:"repeat",color:"primary",onClick:m},{default:o(()=>[a(n,{msg:"Repeat"})]),_:1})):t(e).playlistMode&&t(e).repeat==="repeat_one"?(l(),v(r,{key:2,flat:"",round:"",icon:"repeat_one",color:"primary",onClick:m},{default:o(()=>[a(n,{msg:"Repeat One"})]),_:1})):t(e).repeat==="single"?(l(),v(r,{key:3,flat:"",round:"",icon:"looks_one",color:"primary",onClick:m},{default:o(()=>[a(n,{msg:"Single"})]),_:1})):k("",!0)]),g("div",null,[a(r,{flat:"",round:"",icon:t(e)&&t(e).fullscreen?"fullscreen_exit":"fullscreen",color:"primary",onClick:s[2]||(s[2]=$=>t(S)(!t(e).fullscreen))},{default:o(()=>[a(n,{msg:t(e)&&t(e).fullscreen?"Exit Fullscreen":"Fullscreen"},null,8,["msg"])]),_:1},8,["icon"])])]))}},C=i=>i.toString().padStart(2,"0"),w=i=>{if(!Number.isFinite(i)||i<0)return"00:00:00";let e=Math.floor(i);const d=Math.floor(e/3600)%24,c=Math.floor(e%3600/60),p=e%60;return`${C(d)}:${C(c)}:${C(p)}`},E={class:"row no-wrap q-pt-none q-mt-none q-px-md q-gutter-x-sm items-center"},I={key:0,class:"gt-xs text-caption"},A={__name:"timeSlider",props:{time:{type:Boolean,default:!0}},setup(i){const{pStatus:e}=q(h()),{fnUpdateTime:d}=B(),c=M(0),p=M(!1),S=i,u=P(()=>e.value.player?.[e.value.activePlayerId]||{time:0,duration:0,file:{}}),_=P(()=>u.value?.file?.is_image??!1),x=f=>{c.value=f,!p.value&&!_.value&&d(c.value)},m=f=>{try{if(_.value)return;f==="start"?p.value=!0:f==="end"&&(p.value=!1,d(c.value))}catch(s){console.error("Error during panning:",s)}};return(f,s)=>(l(),y("div",E,[a(T,{class:"q-mt-none q-pt-none","model-value":u.value.time/1e3,min:0,step:.01,max:u.value.duration/1e3,label:"","label-value":t(w)(u.value.time/1e3),"onUpdate:modelValue":x,onPan:m,disable:_.value},null,8,["model-value","max","label-value","disable"]),S.time?(l(),y("div",I,b(t(w)(u.value.time/1e3))+"/"+b(t(w)(u.value.duration/1e3)),1)):k("",!0)]))}};export{A as _,z as a,w as m};
