import{s as q,f as y,o,S as g,b as v,e as t,a,w as r,P as l,c,n as w,q as P,t as $}from"./index-D06vnydI.js";import{_ as n}from"./delayedTooltip-DIz3BjMV.js";import{u as b}from"./useStatus-BO6TZKr_.js";import{u as B}from"./usePlayer-CWHD5-ia.js";import{socket as F}from"./socketio-BzY1gKe2.js";import{Q as T}from"./QSlider-C1BfcHnS.js";const h={class:"row no-wrap justify-center items-center q-mb-sm q-gutter-x-md"},N={key:0},R={key:1},I={__name:"controlBtns",setup(u){const{pStatus:e}=q(b()),{fnPlay:f,fnStop:m,fnPause:d,fnSetFullscreen:_}=B(),p=()=>{e.value.repeat==="none"?e.value.repeat="all":e.value.repeat==="all"?e.value.repeat=e.value.playlistmode?"repeat_one":"none":e.value.playlistmode&&e.value.repeat==="repeat_one"?e.value.repeat="single":e.value.repeat==="single"&&(e.value.repeat="none"),F.emit("event",{type:"repeat",value:e.value.repeat})};return(x,s)=>(o(),y("div",h,[t(e).playlistmode?(o(),y("div",N,[a(l,{flat:"",round:"",icon:"fast_rewind",color:"primary"},{default:r(()=>[a(n,{msg:"Rewind"})]),_:1})])):g("",!0),v("div",null,[t(e).player.playing!==1?(o(),c(l,{key:0,flat:"",round:"",icon:"play_arrow",color:"primary",onClick:s[0]||(s[0]=i=>t(f)())},{default:r(()=>[a(n,{msg:"Play"})]),_:1})):(o(),c(l,{key:1,flat:"",round:"",icon:"pause",color:"primary",onClick:t(d)},{default:r(()=>[a(n,{msg:"Pause"})]),_:1},8,["onClick"]))]),v("div",null,[a(l,{flat:"",round:"",icon:"stop",color:"red-10",onClick:s[1]||(s[1]=i=>t(m)())},{default:r(()=>[a(n,{msg:"Stop"})]),_:1})]),t(e).playlistmode?(o(),y("div",R,[a(l,{flat:"",round:"",icon:"fast_forward",color:"primary"},{default:r(()=>[a(n,{msg:"Forward"})]),_:1})])):g("",!0),v("div",null,[t(e).repeat==="none"?(o(),c(l,{key:0,flat:"",round:"",icon:"repeat",color:"grey-5",onClick:p},{default:r(()=>[a(n,{msg:"None"})]),_:1})):t(e).repeat==="all"?(o(),c(l,{key:1,flat:"",round:"",icon:"repeat",color:"primary",onClick:p},{default:r(()=>[a(n,{msg:"Repeat"})]),_:1})):t(e).playlistmode&&t(e).repeat==="repeat_one"?(o(),c(l,{key:2,flat:"",round:"",icon:"repeat_one",color:"primary",onClick:p},{default:r(()=>[a(n,{msg:"Repeat One"})]),_:1})):t(e).repeat==="single"?(o(),c(l,{key:3,flat:"",round:"",icon:"looks_one",color:"primary",onClick:p},{default:r(()=>[a(n,{msg:"Single"})]),_:1})):g("",!0)]),v("div",null,[t(e).player&&t(e).player.fullscreen?(o(),c(l,{key:0,flat:"",round:"",icon:"fullscreen_exit",color:"primary",onClick:s[2]||(s[2]=i=>t(_)(!t(e).player.fullscreen))},{default:r(()=>[a(n,{msg:"Exit Fullscreen"})]),_:1})):(o(),c(l,{key:1,flat:"",round:"",icon:"fullscreen",color:"primary",onClick:s[3]||(s[3]=i=>t(_)(!t(e).player.fullscreen))},{default:r(()=>[a(n,{msg:"Fullscreen"})]),_:1}))])]))}},k=u=>u.toString().padStart(2,"0"),S=u=>{if(!Number.isFinite(u)||u<0)return"00:00:00";let e=Math.floor(u);const f=Math.floor(e/3600)%24,m=Math.floor(e%3600/60),d=e%60;return`${k(f)}:${k(m)}:${k(d)}`},M={class:"row no-wrap q-pt-none q-mt-none q-px-md q-gutter-x-sm items-center"},V={key:0,class:"gt-xs text-caption"},O={__name:"timeSlider",props:{time:{type:Boolean,default:!0}},setup(u){const{pStatus:e}=q(b()),{fnUpdateTime:f}=B(),m=w(0),d=w(!1),_=u,p=P(()=>e.value.current?.is_image),x=i=>{m.value=i,!d.value&&!p.value&&f(m.value)},s=i=>{try{if(p.value)return;i==="start"?d.value=!0:i==="end"&&(d.value=!1,f(m.value))}catch(C){console.error("Error during panning:",C)}};return(i,C)=>(o(),y("div",M,[a(T,{class:"q-mt-none q-pt-none","model-value":t(e).player.time/1e3,min:0,step:.01,max:t(e).player.duration/1e3,label:"","label-value":t(S)(t(e).player.time/1e3),"onUpdate:modelValue":x,onPan:s,disable:p.value},null,8,["model-value","max","label-value","disable"]),_.time?(o(),y("div",V,$(t(S)(t(e).player.time/1e3))+"/"+$(t(S)(t(e).player.duration/1e3)),1)):g("",!0)]))}};export{O as _,I as a,S as m};
