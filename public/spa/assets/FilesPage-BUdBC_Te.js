import{c as D,o as b,w as h,a as g,h as we,g as X,f as q,b as S,Q as U,T as Q,U as Z,S as j,R as H,t as x,e as M,P as O,V as Nt,W as Oe,X as Qe,Y as Ut,n as J,i as ee,q as v,z as d,B as ne,j as re,A as It,Z as Ae,_ as je,F as Ht,v as W,G as Wt,E as lt,$ as ct,H as Me,a0 as Kt,a1 as Gt,x as dt,y as ft,a2 as Xt,a3 as Yt,a4 as Zt,a5 as at,a6 as De,a7 as ot,a8 as Jt,a9 as mt,aa as el,ab as Le,ac as se,ad as tl,s as ll}from"./index-D06vnydI.js";import{a as Ve,u as ze}from"./useApi-DyMPQWJu.js";import{Q as al,a as nt,b as ol,c as nl,u as rl,d as sl,e as vt,f as il}from"./QSelect-CRyd0bZj.js";import{a as gt,b as ul,c as ye,Q as cl}from"./QMenu-CtJ5DN5R.js";import{u as Ee}from"./use-dialog-plugin-component-Dw_I3MMD.js";import{_ as G}from"./delayedTooltip-DIz3BjMV.js";import{h as Ne,Q as rt,f as dl}from"./useUtils-CVYkVT3R.js";import{_ as Ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as fl}from"./usePlayer-CWHD5-ia.js";import"./format-CJebrXOQ.js";import"./position-engine-CCjzhR2y.js";import"./useStatus-BO6TZKr_.js";import"./socketio-BzY1gKe2.js";const ml={class:"row no-wrap items-center q-pa-md q-gutter-x-sm"},vl={class:"col q-px-sm"},gl={class:"q-uploader__subtitle"},bl=["onClick"],_l={__name:"updateFiles",setup(e){const o=Ve(),{dialogRef:i,onDialogOK:m}=Ee(),{getAddr:s}=ze(),u=()=>`${s()}/api/files`,r=a=>{o.notify({type:"negative",message:`${a.length} file(s) did not pass validation constraints`})};return(a,n)=>(b(),D(Qe,{ref_key:"dialogRef",ref:i,persistent:""},{default:h(()=>[g(we,{class:"rouneded"},{default:h(()=>[g(X,{class:"q-pa-none"},{default:h(()=>[g(al,{flat:"",class:"uploader",style:{"background-color":"transparent",width:"100%"},"text-color":"grey-10",color:"grey-2",multiple:"",url:u,"field-name":c=>encodeURIComponent(c.name),accept:"image/*,video/*,audio/*",onRejected:r},{header:h(c=>[S("div",ml,[c.queuedFiles.length>0?(b(),D(O,{key:0,round:"",flat:"",color:"primary",icon:"clear_all",onClick:c.removeQueuedFiles},{default:h(()=>[g(G,{msg:"Clear All"})]),_:2},1032,["onClick"])):j("",!0),c.uploadedFiles.length>0?(b(),D(O,{key:1,round:"",flat:"",icon:"done_all",onClick:c.removeUploadedFiles},{default:h(()=>[g(G,{msg:"Remove Uploaded Files"})]),_:2},1032,["onClick"])):j("",!0),c.queuedFiles.length===0&&c.uploadedFiles.length===0?(b(),D(U,{key:2,name:"upload",size:"sm"})):j("",!0),c.isUploading?(b(),D(Nt,{key:3,class:"q-uploader__spinner"})):j("",!0),S("div",vl,[n[0]||(n[0]=S("div",{class:"q-uploader__title"},"Upload Files",-1)),S("div",gl,x(c.uploadSizeLabel)+" / "+x(c.uploadProgressLabel),1)]),c.canAddFiles?(b(),D(O,{key:4,round:"",flat:"",type:"a",color:"grey",icon:"add_box",onClick:c.pickFiles},{default:h(()=>[g(nl),g(G,{msg:"Pick Files"})]),_:2},1032,["onClick"])):j("",!0),c.canUpload?(b(),D(O,{key:5,round:"",flat:"",color:"primary",icon:"cloud_upload",onClick:c.upload},{default:h(()=>[g(G,{msg:"Upload Files"})]),_:2},1032,["onClick"])):j("",!0),c.isUploading?(b(),D(O,{key:6,round:"",flat:"",icon:"clear",onClick:c.abort},{default:h(()=>[g(G,{msg:"Abort Upload"})]),_:2},1032,["onClick"])):j("",!0)])]),list:h(c=>[c.files.length===0?(b(),q("div",{key:0,class:"empty-list-message q-pa-lg flex flex-center column items-center",onClick:c.pickFiles,style:{cursor:"pointer"}},[g(U,{name:"add_circle",size:"3rem",color:"grey-5"}),n[1]||(n[1]=S("div",{class:"text-h6 text-grey-7 q-mt-sm"},"Add Files",-1))],8,bl)):(b(),D(gt,{key:1,class:"fit"},{default:h(()=>[(b(!0),q(Q,null,Z(c.files,l=>(b(),D(ul,{key:l.name,class:"q-py-md"},{default:h(()=>[g(ye,null,{default:h(()=>[g(nt,null,{default:h(()=>[H(x(l.name),1)]),_:2},1024),g(nt,{caption:""},{default:h(()=>[H(x(M(Ne)(l.size))+" / "+x(l.__status),1)]),_:2},1024)]),_:2},1024),l.__status==="uploaded"?(b(),D(ye,{key:0,side:""},{default:h(()=>[g(U,{name:"done",color:"positive"})]),_:1})):j("",!0),l.__status==="failed"?(b(),D(ye,{key:1,side:""},{default:h(()=>[g(U,{name:"error",color:"negative"})]),_:1})):j("",!0),l.__status==="uploading"?(b(),D(ye,{key:2,side:"",class:"q-pa-none flex flex-center"},{default:h(()=>[g(ol,{"show-value":"",color:"primary",value:Math.round(l.__progress*100),size:"2rem",thickness:.4},null,8,["value"])]),_:2},1024)):j("",!0)]),_:2},1024))),128))]),_:2},1024))]),_:1},8,["field-name"])]),_:1}),g(Oe,{align:"right"},{default:h(()=>[g(O,{round:"",flat:"",icon:"cancel",color:"grey",onClick:M(m)},{default:h(()=>[g(G,{msg:"Close"})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512))}},yl=Ue(_l,[["__scopeId","data-v-ca06270d"]]),oe=Ut("files",()=>{const e=J([]),{apiCallWithLoading:o}=ze();return{files:e,getFileList:async()=>{const u=await o("/files","GET",null,"Fetching file list...");e.value=u.data,console.log("File list fetched successfully:",e.value)},deleteFile:async u=>{const r=await o(`/files/${u.uuid}`,"DELETE",null,`Deleting file ${u.uuid}...`);r.status===200?(console.log("File deleted successfully:",u),e.value=e.value.filter(a=>a.uuid!==u.uuid)):console.error("Failed to delete file:",r.statusText)},downloadFile:async u=>{const r=await o(`/files/download/${u.uuid}`,"GET",null,`Downloading file ${u.uuid}...`),a=window.URL.createObjectURL(new Blob([r.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",u.filename),document.body.appendChild(n),n.click()}}}),hl={class:"row no-wrap justify-between items-center"},wl={class:"row no-wrap items-center q-gutter-x-sm"},Sl={__name:"filesHeader",setup(e){const o=Ve(),i=()=>{o.dialog({component:yl}).onOk(()=>{oe().getFileList()})};return(m,s)=>(b(),q("div",hl,[S("div",wl,[g(U,{name:"folder",size:"md",color:"yellow"}),s[0]||(s[0]=S("div",{class:"text-title"},"Files",-1))]),S("div",null,[g(O,{round:"",flat:"",color:"primary",icon:"add_circle",onClick:i})])]))}},ie=ee({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:o}){const i=re(),m=v(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return d("td",{class:m.value},ne(o.default));const s=i.vnode.key,u=(e.props.colsMap!==void 0?e.props.colsMap[s]:null)||e.props.col;if(u===void 0)return;const{row:r}=e.props;return d("td",{class:m.value+u.__tdClass(r),style:u.__tdStyle(r)},ne(o.default))}}}),kl=ee({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:o}){const i=v(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>d("tr",{style:e.props?.__trStyle,class:i.value},ne(o.default))}}),pl=ee({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:o,emit:i}){const m=re(),{proxy:{$q:s}}=m,u=r=>{i("click",r)};return()=>{if(e.props===void 0)return d("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:u},ne(o.default));let r,a;const n=m.vnode.key;if(n){if(r=e.props.colsMap[n],r===void 0)return}else r=e.props.col;if(r.sortable===!0){const l=r.align==="right"?"unshift":"push";a=It(o.default,[]),a[l](d(U,{class:r.__iconClass,name:s.iconSet.table.arrowUp}))}else a=ne(o.default);const c={class:r.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:r.headerStyle,onClick:l=>{r.sortable===!0&&e.props.sort(r),u(l)}};return d("th",c,a)}}}),ql=["horizontal","vertical","cell","none"],Cl=ee({name:"QMarkupTable",props:{...Ae,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>ql.includes(e)}},setup(e,{slots:o}){const i=re(),m=je(e,i.proxy.$q),s=v(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(m.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>d("div",{class:s.value},[d("table",{class:"q-table"},ne(o.default))])}});function bt(e,o){return d("div",e,[d("table",{class:"q-table"},o)])}const xl={list:gt,table:Cl},Pl=["list","table","__qtable"],Fl=ee({name:"QVirtualScroll",props:{...rl,type:{type:String,default:"list",validator:e=>Pl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Ht},setup(e,{slots:o,attrs:i}){let m;const s=J(null),u=v(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:a,padVirtualScroll:n,onVirtualScrollEvt:c}=sl({virtualScrollLength:u,getVirtualScrollTarget:R,getVirtualScrollEl:F}),l=v(()=>{if(u.value===0)return[];const z=(E,L)=>({index:r.value.from+L,item:E});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map(z):e.itemsFn(r.value.from,r.value.to-r.value.from).map(z)}),w=v(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),P=v(()=>e.scrollTarget!==void 0?{}:{tabindex:0});W(u,()=>{a()}),W(()=>e.scrollTarget,()=>{p(),C()});function F(){return s.value.$el||s.value}function R(){return m}function C(){m=Wt(F(),e.scrollTarget),m.addEventListener("scroll",c,lt.passive)}function p(){m!==void 0&&(m.removeEventListener("scroll",c,lt.passive),m=void 0)}function V(){let z=n(e.type==="list"?"div":"tbody",l.value.map(o.default));return o.before!==void 0&&(z=o.before().concat(z)),ft(o.after,z)}return ct(()=>{a()}),Me(()=>{C()}),Kt(()=>{C()}),Gt(()=>{p()}),dt(()=>{p()}),()=>{if(o.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?bt({ref:s,class:"q-table__middle "+w.value},V()):d(xl[e.type],{...i,ref:s,class:[i.class,w.value],...P.value},V)}}}),Rl={xs:2,sm:4,md:6,lg:10,xl:14};function st(e,o,i){return{transform:o===!0?`translateX(${i.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const $l=ee({name:"QLinearProgress",props:{...Ae,...Xt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:o}){const{proxy:i}=re(),m=je(e,i.$q),s=Yt(e,Rl),u=v(()=>e.indeterminate===!0||e.query===!0),r=v(()=>e.reverse!==e.query),a=v(()=>({...s.value!==null?s.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),n=v(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),c=v(()=>st(e.buffer!==void 0?e.buffer:1,r.value,i.$q)),l=v(()=>`with${e.instantFeedback===!0?"out":""}-transition`),w=v(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${l.value} q-linear-progress__track--${m.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),P=v(()=>st(u.value===!0?1:e.value,r.value,i.$q)),F=v(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${l.value} q-linear-progress__model--${u.value===!0?"in":""}determinate`),R=v(()=>({width:`${e.value*100}%`})),C=v(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${l.value}`);return()=>{const p=[d("div",{class:w.value,style:c.value}),d("div",{class:F.value,style:P.value})];return e.stripe===!0&&u.value===!1&&p.push(d("div",{class:C.value,style:R.value})),d("div",{class:n.value,style:a.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},ft(o.default,p))}}});let ue=0;const Tl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Bl=["update:fullscreen","fullscreen"];function Ll(){const e=re(),{props:o,emit:i,proxy:m}=e;let s,u,r;const a=J(!1);Zt(e)===!0&&W(()=>m.$route.fullPath,()=>{o.noRouteFullscreenExit!==!0&&l()}),W(()=>o.fullscreen,w=>{a.value!==w&&n()}),W(a,w=>{i("update:fullscreen",w),i("fullscreen",w)});function n(){a.value===!0?l():c()}function c(){a.value!==!0&&(a.value=!0,r=m.$el.parentNode,r.replaceChild(u,m.$el),document.body.appendChild(m.$el),ue++,ue===1&&document.body.classList.add("q-body--fullscreen-mixin"),s={handler:l},at.add(s))}function l(){a.value===!0&&(s!==void 0&&(at.remove(s),s=void 0),r.replaceChild(m.$el,u),a.value=!1,ue=Math.max(0,ue-1),ue===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),m.$el.scrollIntoView!==void 0&&setTimeout(()=>{m.$el.scrollIntoView()})))}return ct(()=>{u=document.createElement("span")}),Me(()=>{o.fullscreen===!0&&c()}),dt(l),Object.assign(m,{toggleFullscreen:n,setFullscreen:c,exitFullscreen:l}),{inFullscreen:a,toggleFullscreen:n}}function Dl(e,o){return new Date(e)-new Date(o)}const Ol={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Ql(e,o,i,m){const s=v(()=>{const{sortBy:a}=o.value;return a&&i.value.find(n=>n.name===a)||null}),u=v(()=>e.sortMethod!==void 0?e.sortMethod:(a,n,c)=>{const l=i.value.find(F=>F.name===n);if(l===void 0||l.field===void 0)return a;const w=c===!0?-1:1,P=typeof l.field=="function"?F=>l.field(F):F=>F[l.field];return a.sort((F,R)=>{let C=P(F),p=P(R);return l.rawSort!==void 0?l.rawSort(C,p,F,R)*w:C==null?-1*w:p==null?1*w:l.sort!==void 0?l.sort(C,p,F,R)*w:De(C)===!0&&De(p)===!0?(C-p)*w:ot(C)===!0&&ot(p)===!0?Dl(C,p)*w:typeof C=="boolean"&&typeof p=="boolean"?(C-p)*w:([C,p]=[C,p].map(V=>(V+"").toLocaleString().toLowerCase()),C<p?-1*w:C===p?0:w)})});function r(a){let n=e.columnSortOrder;if(Jt(a)===!0)a.sortOrder&&(n=a.sortOrder),a=a.name;else{const w=i.value.find(P=>P.name===a);w?.sortOrder&&(n=w.sortOrder)}let{sortBy:c,descending:l}=o.value;c!==a?(c=a,l=n==="da"):e.binaryStateSort===!0?l=!l:l===!0?n==="ad"?c=null:l=!1:n==="ad"?l=!0:c=null,m({sortBy:c,descending:l,page:1})}return{columnToSort:s,computedSortMethod:u,sort:r}}const Al={filter:[String,Object],filterMethod:Function};function jl(e,o){const i=v(()=>e.filterMethod!==void 0?e.filterMethod:(m,s,u,r)=>{const a=s?s.toLowerCase():"";return m.filter(n=>u.some(c=>{const l=r(c,n)+"";return(l==="undefined"||l==="null"?"":l.toLowerCase()).indexOf(a)!==-1}))});return W(()=>e.filter,()=>{mt(()=>{o({page:1},!0)})},{deep:!0}),{computedFilterMethod:i}}function Ml(e,o){for(const i in o)if(o[i]!==e[i])return!1;return!0}function it(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Vl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function zl(e,o){const{props:i,emit:m}=e,s=J(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:i.rowsPerPageOptions.length!==0?i.rowsPerPageOptions[0]:5},i.pagination)),u=v(()=>{const l=i["onUpdate:pagination"]!==void 0?{...s.value,...i.pagination}:s.value;return it(l)}),r=v(()=>u.value.rowsNumber!==void 0);function a(l){n({pagination:l,filter:i.filter})}function n(l={}){mt(()=>{m("request",{pagination:l.pagination||u.value,filter:l.filter||i.filter,getCellValue:o})})}function c(l,w){const P=it({...u.value,...l});if(Ml(u.value,P)===!0){r.value===!0&&w===!0&&a(P);return}if(r.value===!0){a(P);return}i.pagination!==void 0&&i["onUpdate:pagination"]!==void 0?m("update:pagination",P):s.value=P}return{innerPagination:s,computedPagination:u,isServerSide:r,requestServerInteraction:n,setPagination:c}}function El(e,o,i,m,s,u){const{props:r,emit:a,proxy:{$q:n}}=e,c=v(()=>m.value===!0?i.value.rowsNumber||0:u.value),l=v(()=>{const{page:L,rowsPerPage:A}=i.value;return(L-1)*A}),w=v(()=>{const{page:L,rowsPerPage:A}=i.value;return L*A}),P=v(()=>i.value.page===1),F=v(()=>i.value.rowsPerPage===0?1:Math.max(1,Math.ceil(c.value/i.value.rowsPerPage))),R=v(()=>w.value===0?!0:i.value.page>=F.value),C=v(()=>(r.rowsPerPageOptions.includes(o.value.rowsPerPage)?r.rowsPerPageOptions:[o.value.rowsPerPage].concat(r.rowsPerPageOptions)).map(A=>({label:A===0?n.lang.table.allRows:""+A,value:A})));W(F,(L,A)=>{if(L===A)return;const ce=i.value.page;L&&!ce?s({page:1}):L<ce&&s({page:L})});function p(){s({page:1})}function V(){const{page:L}=i.value;L>1&&s({page:L-1})}function z(){const{page:L,rowsPerPage:A}=i.value;w.value>0&&L*A<c.value&&s({page:L+1})}function E(){s({page:F.value})}return r["onUpdate:pagination"]!==void 0&&a("update:pagination",{...i.value}),{firstRowIndex:l,lastRowIndex:w,isFirstPage:P,isLastPage:R,pagesNumber:F,computedRowsPerPageOptions:C,computedRowsNumber:c,firstPage:p,prevPage:V,nextPage:z,lastPage:E}}const Nl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Ul=["update:selected","selection"];function Il(e,o,i,m){const s=v(()=>{const R={};return e.selected.map(m.value).forEach(C=>{R[C]=!0}),R}),u=v(()=>e.selection!=="none"),r=v(()=>e.selection==="single"),a=v(()=>e.selection==="multiple"),n=v(()=>i.value.length!==0&&i.value.every(R=>s.value[m.value(R)]===!0)),c=v(()=>n.value!==!0&&i.value.some(R=>s.value[m.value(R)]===!0)),l=v(()=>e.selected.length);function w(R){return s.value[R]===!0}function P(){o("update:selected",[])}function F(R,C,p,V){o("selection",{rows:C,added:p,keys:R,evt:V});const z=r.value===!0?p===!0?C:[]:p===!0?e.selected.concat(C):e.selected.filter(E=>R.includes(m.value(E))===!1);o("update:selected",z)}return{hasSelectionMode:u,singleSelection:r,multipleSelection:a,allRowsSelected:n,someRowsSelected:c,rowsSelectedNumber:l,isRowSelected:w,clearSelection:P,updateSelection:F}}function ut(e){return Array.isArray(e)?e.slice():[]}const Hl={expanded:Array},Wl=["update:expanded"];function Kl(e,o){const i=J(ut(e.expanded));W(()=>e.expanded,r=>{i.value=ut(r)});function m(r){return i.value.includes(r)}function s(r){e.expanded!==void 0?o("update:expanded",r):i.value=r}function u(r,a){const n=i.value.slice(),c=n.indexOf(r);a===!0?c===-1&&(n.push(r),s(n)):c!==-1&&(n.splice(c,1),s(n))}return{isRowExpanded:m,setExpanded:s,updateExpanded:u}}const Gl={visibleColumns:Array};function Xl(e,o,i){const m=v(()=>{if(e.columns!==void 0)return e.columns;const a=e.rows[0];return a!==void 0?Object.keys(a).map(n=>({name:n,label:n.toUpperCase(),field:n,align:De(a[n])?"right":"left",sortable:!0})):[]}),s=v(()=>{const{sortBy:a,descending:n}=o.value;return(e.visibleColumns!==void 0?m.value.filter(l=>l.required===!0||e.visibleColumns.includes(l.name)===!0):m.value).map(l=>{const w=l.align||"right",P=`text-${w}`;return{...l,align:w,__iconClass:`q-table__sort-icon q-table__sort-icon--${w}`,__thClass:P+(l.headerClasses!==void 0?" "+l.headerClasses:"")+(l.sortable===!0?" sortable":"")+(l.name===a?` sorted ${n===!0?"sort-desc":""}`:""),__tdStyle:l.style!==void 0?typeof l.style!="function"?()=>l.style:l.style:()=>null,__tdClass:l.classes!==void 0?typeof l.classes!="function"?()=>P+" "+l.classes:F=>P+" "+l.classes(F):()=>P}})}),u=v(()=>{const a={};return s.value.forEach(n=>{a[n.name]=n}),a}),r=v(()=>e.tableColspan!==void 0?e.tableColspan:s.value.length+(i.value===!0?1:0));return{colList:m,computedCols:s,computedColsMap:u,computedColspan:r}}const he="q-table__bottom row items-center",_t={};vt.forEach(e=>{_t[e]={}});const Yl=ee({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},..._t,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Ae,...Tl,...Gl,...Al,...Vl,...Hl,...Nl,...Ol},emits:["request","virtualScroll",...Bl,...Wl,...Ul],setup(e,{slots:o,emit:i}){const m=re(),{proxy:{$q:s}}=m,u=je(e,s),{inFullscreen:r,toggleFullscreen:a}=Ll(),n=v(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),c=J(null),l=J(null),w=v(()=>e.grid!==!0&&e.virtualScroll===!0),P=v(()=>" q-table__card"+(u.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),F=v(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":P.value)+(u.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(r.value===!0?" fullscreen scroll":"")),R=v(()=>F.value+(e.loading===!0?" q-table--loading":""));W(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+F.value,()=>{w.value===!0&&l.value?.reset()});const{innerPagination:C,computedPagination:p,isServerSide:V,requestServerInteraction:z,setPagination:E}=zl(m,le),{computedFilterMethod:L}=jl(e,E),{isRowExpanded:A,setExpanded:ce,updateExpanded:yt}=Kl(e,i),Se=v(()=>{let t=e.rows;if(V.value===!0||t.length===0)return t;const{sortBy:f,descending:_}=p.value;return e.filter&&(t=L.value(t,e.filter,I.value,le)),pt.value!==null&&(t=qt.value(e.rows===t?t.slice():t,f,_)),t}),Ie=v(()=>Se.value.length),K=v(()=>{let t=Se.value;if(V.value===!0)return t;const{rowsPerPage:f}=p.value;return f!==0&&(fe.value===0&&e.rows!==t?t.length>me.value&&(t=t.slice(0,me.value)):t=t.slice(fe.value,me.value)),t}),{hasSelectionMode:te,singleSelection:ht,multipleSelection:He,allRowsSelected:wt,someRowsSelected:We,rowsSelectedNumber:ke,isRowSelected:pe,clearSelection:St,updateSelection:de}=Il(e,i,K,n),{colList:kt,computedCols:I,computedColsMap:Ke,computedColspan:Ge}=Xl(e,p,te),{columnToSort:pt,computedSortMethod:qt,sort:qe}=Ql(e,p,kt,E),{firstRowIndex:fe,lastRowIndex:me,isFirstPage:Ce,isLastPage:xe,pagesNumber:ve,computedRowsPerPageOptions:Ct,computedRowsNumber:ge,firstPage:Pe,prevPage:Fe,nextPage:Re,lastPage:$e}=El(m,C,p,V,E,Ie),xt=v(()=>K.value.length===0),Pt=v(()=>{const t={};return vt.forEach(f=>{t[f]=e[f]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function Ft(){w.value===!0&&l.value.reset()}function Rt(){if(e.grid===!0)return zt();const t=e.hideHeader!==!0?et:null;if(w.value===!0){const _=o["top-row"],y=o["bottom-row"],k={default:B=>Ye(B.item,o.body,B.index)};if(_!==void 0){const B=d("tbody",_({cols:I.value}));k.before=t===null?()=>B:()=>[t()].concat(B)}else t!==null&&(k.before=t);return y!==void 0&&(k.after=()=>d("tbody",y({cols:I.value}))),d(Fl,{ref:l,class:e.tableClass,style:e.tableStyle,...Pt.value,scrollTarget:e.virtualScrollTarget,items:K.value,type:"__qtable",tableColspan:Ge.value,onVirtualScroll:Tt},k)}const f=[Bt()];return t!==null&&f.unshift(t()),bt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},f)}function $t(t,f){if(l.value!==null){l.value.scrollTo(t,f);return}t=parseInt(t,10);const _=c.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(_!==null){const y=c.value.querySelector(".q-table__middle.scroll"),k=_.offsetTop-e.virtualScrollStickySizeStart,B=k<y.scrollTop?"decrease":"increase";y.scrollTop=k,i("virtualScroll",{index:t,from:0,to:C.value.rowsPerPage-1,direction:B})}}function Tt(t){i("virtualScroll",t)}function Xe(){return[d($l,{class:"q-table__linear-progress",color:e.color,dark:u.value,indeterminate:!0,trackColor:"transparent"})]}function Ye(t,f,_){const y=n.value(t),k=pe(y);if(f!==void 0){const T={key:y,row:t,pageIndex:_,__trClass:k?"selected":""};if(e.tableRowStyleFn!==void 0&&(T.__trStyle=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const Y=e.tableRowClassFn(t);Y&&(T.__trClass=`${Y} ${T.__trClass}`)}return f(Ze(T))}const B=o["body-cell"],$=I.value.map(T=>{const Y=o[`body-cell-${T.name}`],_e=Y!==void 0?Y:B;return _e!==void 0?_e(Lt({key:y,row:t,pageIndex:_,col:T})):d("td",{class:T.__tdClass(t),style:T.__tdStyle(t)},le(T,t))});if(te.value===!0){const T=o["body-selection"],Y=T!==void 0?T(Dt({key:y,row:t,pageIndex:_})):[d(Le,{modelValue:k,color:e.color,dark:u.value,dense:e.dense,"onUpdate:modelValue":(_e,Et)=>{de([y],[t],_e,Et)}})];$.unshift(d("td",{class:"q-table--col-auto-width"},Y))}const N={key:y,class:{selected:k}};if(e.onRowClick!==void 0&&(N.class["cursor-pointer"]=!0,N.onClick=T=>{i("rowClick",T,t,_)}),e.onRowDblclick!==void 0&&(N.class["cursor-pointer"]=!0,N.onDblclick=T=>{i("rowDblclick",T,t,_)}),e.onRowContextmenu!==void 0&&(N.class["cursor-pointer"]=!0,N.onContextmenu=T=>{i("rowContextmenu",T,t,_)}),e.tableRowStyleFn!==void 0&&(N.style=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const T=e.tableRowClassFn(t);T&&(N.class[T]=!0)}return d("tr",N,$)}function Bt(){const t=o.body,f=o["top-row"],_=o["bottom-row"];let y=K.value.map((k,B)=>Ye(k,t,B));return f!==void 0&&(y=f({cols:I.value}).concat(y)),_!==void 0&&(y=y.concat(_({cols:I.value}))),d("tbody",y)}function Ze(t){return Te(t),t.cols=t.cols.map(f=>se({...f},"value",()=>le(f,t.row))),t}function Lt(t){return Te(t),se(t,"value",()=>le(t.col,t.row)),t}function Dt(t){return Te(t),t}function Te(t){Object.assign(t,{cols:I.value,colsMap:Ke.value,sort:qe,rowIndex:fe.value+t.pageIndex,color:e.color,dark:u.value,dense:e.dense}),te.value===!0&&se(t,"selected",()=>pe(t.key),(f,_)=>{de([t.key],[t.row],f,_)}),se(t,"expand",()=>A(t.key),f=>{yt(t.key,f)})}function le(t,f){const _=typeof t.field=="function"?t.field(f):f[t.field];return t.format!==void 0?t.format(_,f):_}const ae=v(()=>({pagination:p.value,pagesNumber:ve.value,isFirstPage:Ce.value,isLastPage:xe.value,firstPage:Pe,prevPage:Fe,nextPage:Re,lastPage:$e,inFullscreen:r.value,toggleFullscreen:a}));function Ot(){const t=o.top,f=o["top-left"],_=o["top-right"],y=o["top-selection"],k=te.value===!0&&y!==void 0&&ke.value>0,B="q-table__top relative-position row items-center";if(t!==void 0)return d("div",{class:B},[t(ae.value)]);let $;if(k===!0?$=y(ae.value).slice():($=[],f!==void 0?$.push(d("div",{class:"q-table__control"},[f(ae.value)])):e.title&&$.push(d("div",{class:"q-table__control"},[d("div",{class:["q-table__title",e.titleClass]},e.title)]))),_!==void 0&&($.push(d("div",{class:"q-table__separator col"})),$.push(d("div",{class:"q-table__control"},[_(ae.value)]))),$.length!==0)return d("div",{class:B},$)}const Je=v(()=>We.value===!0?null:wt.value);function et(){const t=Qt();return e.loading===!0&&o.loading===void 0&&t.push(d("tr",{class:"q-table__progress"},[d("th",{class:"relative-position",colspan:Ge.value},Xe())])),d("thead",t)}function Qt(){const t=o.header,f=o["header-cell"];if(t!==void 0)return t(Be({header:!0})).slice();const _=I.value.map(y=>{const k=o[`header-cell-${y.name}`],B=k!==void 0?k:f,$=Be({col:y});return B!==void 0?B($):d(pl,{key:y.name,props:$},()=>y.label)});if(ht.value===!0&&e.grid!==!0)_.unshift(d("th",{class:"q-table--col-auto-width"}," "));else if(He.value===!0){const y=o["header-selection"],k=y!==void 0?y(Be({})):[d(Le,{color:e.color,modelValue:Je.value,dark:u.value,dense:e.dense,"onUpdate:modelValue":tt})];_.unshift(d("th",{class:"q-table--col-auto-width"},k))}return[d("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},_)]}function Be(t){return Object.assign(t,{cols:I.value,sort:qe,colsMap:Ke.value,color:e.color,dark:u.value,dense:e.dense}),He.value===!0&&se(t,"selected",()=>Je.value,tt),t}function tt(t){We.value===!0&&(t=!1),de(K.value.map(n.value),K.value,t)}const be=v(()=>{const t=[e.iconFirstPage||s.iconSet.table.firstPage,e.iconPrevPage||s.iconSet.table.prevPage,e.iconNextPage||s.iconSet.table.nextPage,e.iconLastPage||s.iconSet.table.lastPage];return s.lang.rtl===!0?t.reverse():t});function At(){if(e.hideBottom===!0)return;if(xt.value===!0){if(e.hideNoData===!0)return;const _=e.loading===!0?e.loadingLabel||s.lang.table.loading:e.filter?e.noResultsLabel||s.lang.table.noResults:e.noDataLabel||s.lang.table.noData,y=o["no-data"],k=y!==void 0?[y({message:_,icon:s.iconSet.table.warning,filter:e.filter})]:[d(U,{class:"q-table__bottom-nodata-icon",name:s.iconSet.table.warning}),_];return d("div",{class:he+" q-table__bottom--nodata"},k)}const t=o.bottom;if(t!==void 0)return d("div",{class:he},[t(ae.value)]);const f=e.hideSelectedBanner!==!0&&te.value===!0&&ke.value>0?[d("div",{class:"q-table__control"},[d("div",[(e.selectedRowsLabel||s.lang.table.selectedRecords)(ke.value)])])]:[];if(e.hidePagination!==!0)return d("div",{class:he+" justify-end"},Mt(f));if(f.length!==0)return d("div",{class:he},f)}function jt(t){E({page:1,rowsPerPage:t.value})}function Mt(t){let f;const{rowsPerPage:_}=p.value,y=e.paginationLabel||s.lang.table.pagination,k=o.pagination,B=e.rowsPerPageOptions.length>1;if(t.push(d("div",{class:"q-table__separator col"})),B===!0&&t.push(d("div",{class:"q-table__control"},[d("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||s.lang.table.recordsPerPage]),d(il,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:_,options:Ct.value,displayValue:_===0?s.lang.table.allRows:_,dark:u.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":jt})])),k!==void 0)f=k(ae.value);else if(f=[d("span",_!==0?{class:"q-table__bottom-item"}:{},[_?y(fe.value+1,Math.min(me.value,ge.value),ge.value):y(1,Ie.value,ge.value)])],_!==0&&ve.value>1){const $={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&($.size="sm"),ve.value>2&&f.push(d(O,{key:"pgFirst",...$,icon:be.value[0],disable:Ce.value,ariaLabel:s.lang.pagination.first,onClick:Pe})),f.push(d(O,{key:"pgPrev",...$,icon:be.value[1],disable:Ce.value,ariaLabel:s.lang.pagination.prev,onClick:Fe}),d(O,{key:"pgNext",...$,icon:be.value[2],disable:xe.value,ariaLabel:s.lang.pagination.next,onClick:Re})),ve.value>2&&f.push(d(O,{key:"pgLast",...$,icon:be.value[3],disable:xe.value,ariaLabel:s.lang.pagination.last,onClick:$e}))}return t.push(d("div",{class:"q-table__control"},f)),t}function Vt(){const t=e.gridHeader===!0?[d("table",{class:"q-table"},[et()])]:e.loading===!0&&o.loading===void 0?Xe():void 0;return d("div",{class:"q-table__middle"},t)}function zt(){const t=o.item!==void 0?o.item:f=>{const _=f.cols.map(k=>d("div",{class:"q-table__grid-item-row"},[d("div",{class:"q-table__grid-item-title"},[k.label]),d("div",{class:"q-table__grid-item-value"},[k.value])]));if(te.value===!0){const k=o["body-selection"],B=k!==void 0?k(f):[d(Le,{modelValue:f.selected,color:e.color,dark:u.value,dense:e.dense,"onUpdate:modelValue":($,N)=>{de([f.key],[f.row],$,N)}})];_.unshift(d("div",{class:"q-table__grid-item-row"},B),d(tl,{dark:u.value}))}const y={class:["q-table__grid-item-card"+P.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(y.style=[y.style,e.cardStyleFn(f.row)]),e.cardClassFn!==void 0){const k=e.cardClassFn(f.row);k&&(y.class[0]+=` ${k}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(y.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(y.onClick=k=>{i("RowClick",k,f.row,f.pageIndex)}),e.onRowDblclick!==void 0&&(y.onDblclick=k=>{i("RowDblclick",k,f.row,f.pageIndex)}),e.onRowContextmenu!==void 0&&(y.onContextmenu=k=>{i("rowContextmenu",k,f.row,f.pageIndex)})),d("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(f.selected===!0?" q-table__grid-item--selected":"")},[d("div",y,_)])};return d("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},K.value.map((f,_)=>t(Ze({key:n.value(f),row:f,pageIndex:_}))))}return Object.assign(m.proxy,{requestServerInteraction:z,setPagination:E,firstPage:Pe,prevPage:Fe,nextPage:Re,lastPage:$e,isRowSelected:pe,clearSelection:St,isRowExpanded:A,setExpanded:ce,sort:qe,resetVirtualScroll:Ft,scrollTo:$t,getCellValue:le}),el(m.proxy,{filteredSortedRows:()=>Se.value,computedRows:()=>K.value,computedRowsNumber:()=>ge.value}),()=>{const t=[Ot()],f={ref:c,class:R.value};return e.grid===!0?t.push(Vt()):Object.assign(f,{class:[f.class,e.cardClass],style:e.cardStyle}),t.push(Rt(),At()),e.loading===!0&&o.loading!==void 0&&t.push(o.loading()),d("div",f,t)}}}),Zl={class:"row items-center q-pa-md"},Jl={class:"text-h6"},ea={key:0},ta={class:"q-ml-md q-mb-md"},la={class:"text-primary",style:{"min-width":"120px","word-break":"break-all"}},aa={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},oa={key:1,class:"q-ml-md"},na={class:"text-primary",style:{"min-width":"100px","word-break":"break-all"}},ra={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},sa={key:0},ia={key:1},ua={class:"q-ml-md q-mb-md"},ca={class:"row items-start q-mb-xs"},da={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},fa={class:"q-ml-md q-mb-md"},ma={class:"text-primary",style:{"min-width":"120px","word-break":"break-all"}},va={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},ga={key:0,class:"q-ml-md"},ba={class:"text-primary",style:{"min-width":"100px","word-break":"break-all"}},_a={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},ya={class:"q-ml-md q-mb-md"},ha={class:"text-primary",style:{"min-width":"120px","word-break":"break-all"}},wa={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},Sa={key:0,class:"q-ml-md"},ka={class:"text-primary",style:{"min-width":"100px","word-break":"break-all"}},pa={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},qa={key:1},Ca={__name:"metaData",props:{fieldname:{type:String,default:"Metadata"},metadata:{type:Object,default:()=>({})}},setup(e){const{dialogRef:o,onDialogOK:i}=Ee(),m=e,s=v(()=>{const u=m.metadata||{},r={};if(u.format&&(r.format=u.format),u.mimetype?r.mimetype=u.mimetype:u.format&&u.format.format_name&&(r.mimetype=u.format.format_name),Array.isArray(u.streams)){const a=u.streams.find(c=>c.codec_type==="audio"),n=u.streams.find(c=>c.codec_type==="video");a&&(r["audio format"]={codec_name:a.codec_name,codec_long_name:a.codec_long_name,profile:a.profile,sample_rate:a.sample_rate,channels:a.channels,channel_layout:a.channel_layout,bit_rate:a.bit_rate,...a.tags?{tags:a.tags}:{}}),n&&(r["video format"]={codec_name:n.codec_name,codec_long_name:n.codec_long_name,profile:n.profile,width:n.width,height:n.height,pix_fmt:n.pix_fmt,bit_rate:n.bit_rate,...n.tags?{tags:n.tags}:{}})}return r});return(u,r)=>(b(),D(Qe,{ref_key:"dialogRef",ref:o,persistent:""},{default:h(()=>[g(we,{class:"meta-dialog-card"},{default:h(()=>[g(X,null,{default:h(()=>[S("div",Zl,[g(U,{name:"info",color:"primary",size:"sm",class:"q-mr-sm"}),S("div",Jl,x(m.fieldname),1)])]),_:1}),g(X,{class:"meta-scroll-area"},{default:h(()=>[Object.keys(s.value).length?(b(),q("div",ea,[s.value.format?(b(),q(Q,{key:0},[r[0]||(r[0]=S("div",{class:"q-mb-sm text-primary",style:{"font-weight":"bold"}},"format",-1)),S("div",ta,[(b(!0),q(Q,null,Z(s.value.format,(a,n)=>(b(),q("div",{key:"format-"+n,class:"row items-start q-mb-xs"},[S("div",la,x(n),1),S("div",aa,[n==="filename"?(b(),q(Q,{key:0},[H(x(m.fieldname),1)],64)):n==="tags"&&typeof a=="object"&&a?(b(),q("div",oa,[(b(!0),q(Q,null,Z(a,(c,l)=>(b(),q("div",{key:"format-tags-"+l,class:"row items-start q-mb-xs"},[S("div",na,x(l),1),S("div",ra,x(c),1)]))),128))])):n==="size"&&typeof a=="number"?(b(),q(Q,{key:2},[H(x(M(Ne)(a)),1)],64)):(b(),q(Q,{key:3},[typeof a=="string"&&/%[0-9A-Fa-f]{2}/.test(a)?(b(),q("span",sa,x(decodeURIComponent(a)),1)):(b(),q("span",ia,x(typeof a=="number"?a.toLocaleString():a),1))],64))])]))),128))])],64)):j("",!0),s.value.mimetype?(b(),q(Q,{key:1},[r[2]||(r[2]=S("div",{class:"q-mb-sm text-primary",style:{"font-weight":"bold"}},"mimetype",-1)),S("div",ua,[S("div",ca,[r[1]||(r[1]=S("div",{class:"text-primary",style:{"min-width":"120px","word-break":"break-all"}}," value ",-1)),S("div",da,x(s.value.mimetype),1)])])],64)):j("",!0),s.value["audio format"]?(b(),q(Q,{key:2},[r[3]||(r[3]=S("div",{class:"q-mb-sm text-primary",style:{"font-weight":"bold"}},"audio format",-1)),S("div",fa,[(b(!0),q(Q,null,Z(s.value["audio format"],(a,n)=>(b(),q("div",{key:"audio-"+n,class:"row items-start q-mb-xs"},[S("div",ma,x(n),1),S("div",va,[n==="tags"&&typeof a=="object"&&a?(b(),q("div",ga,[(b(!0),q(Q,null,Z(a,(c,l)=>(b(),q("div",{key:"audio-tags-"+l,class:"row items-start q-mb-xs"},[S("div",ba,x(l),1),S("div",_a,x(c),1)]))),128))])):(b(),q(Q,{key:1},[H(x(typeof a=="number"?a.toLocaleString():a),1)],64))])]))),128))])],64)):j("",!0),s.value["video format"]?(b(),q(Q,{key:3},[r[4]||(r[4]=S("div",{class:"q-mb-sm text-primary",style:{"font-weight":"bold"}},"video format",-1)),S("div",ya,[(b(!0),q(Q,null,Z(s.value["video format"],(a,n)=>(b(),q("div",{key:"video-"+n,class:"row items-start q-mb-xs"},[S("div",ha,x(n),1),S("div",wa,[n==="tags"&&typeof a=="object"&&a?(b(),q("div",Sa,[(b(!0),q(Q,null,Z(a,(c,l)=>(b(),q("div",{key:"video-tags-"+l,class:"row items-start q-mb-xs"},[S("div",ka,x(l),1),S("div",pa,x(c),1)]))),128))])):(b(),q(Q,{key:1},[H(x(typeof a=="number"?a.toLocaleString():a),1)],64))])]))),128))])],64)):j("",!0)])):(b(),q("div",qa,r[5]||(r[5]=[S("em",{class:"text-grey"},"표시할 메타데이터가 없습니다.",-1)])))]),_:1}),g(Oe,{class:"justify-end q-pa-md q-mr-md"},{default:h(()=>[g(O,{round:"",icon:"check",color:"primary",size:"sm",onClick:M(i)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},512))}},xa=Ue(Ca,[["__scopeId","data-v-fa50de74"]]),Pa={class:"q-px-md"},Fa={class:"text-bold"},Ra={__name:"deleteFile",props:{fileName:{type:String,required:!0}},setup(e){const{dialogRef:o,onDialogOK:i,onDialogCancel:m}=Ee(),s=e;return(u,r)=>(b(),D(Qe,{ref_key:"dialogRef",ref:o},{default:h(()=>[g(we,null,{default:h(()=>[g(X,{class:"row items-center"},{default:h(()=>[g(U,{name:"delete",size:"2em",color:"negative"}),r[0]||(r[0]=S("div",{class:"text-h6 q-ml-md"},"Delete File",-1))]),_:1,__:[0]}),g(X,null,{default:h(()=>[S("div",Pa,[S("div",Fa,x(s.fileName),1),r[1]||(r[1]=S("div",null,"Are you sure you want to delete this file?",-1))])]),_:1}),g(Oe,{align:"right"},{default:h(()=>[g(O,{round:"",flat:"",icon:"cancel",color:"grey",onClick:M(m)},{default:h(()=>[g(G,{msg:"Cancel"})]),_:1},8,["onClick"]),g(O,{round:"",flat:"",icon:"check_circle",color:"negative",onClick:M(i)},{default:h(()=>[g(G,{msg:"Delete"})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512))}},$a=Ue(Ra,[["__scopeId","data-v-5c153c89"]]),Ta={class:"row no-wrap items-center"},Ba={style:{width:"70px",display:"flex","align-items":"center","justify-content":"center",position:"relative"}},La={__name:"filesList",setup(e){const o=Ve(),{getFileList:i}=oe(),{files:m}=ll(oe()),{getAddr:s}=ze(),{fnPlayById:u}=fl();Me(async()=>{await i()});const r=n=>{console.log(n),o.dialog({component:xa,componentProps:{fieldname:n.fieldname,metadata:n.metadata}})},a=n=>{o.dialog({component:$a,componentProps:{fileName:n.fieldname}}).onOk(()=>{try{o.loading.show({message:`Deleting file with ID ${n.fieldname}...`}),o.notify({type:"positive",message:`File with ID ${n.fieldname} deleted successfully.`}),oe().deleteFile(n),oe().getFileList()}catch(c){o.notify({type:"negative",message:`Error deleting file with ID ${n.fieldname}: ${c.message}`})}finally{o.loading.hide()}}).onCancel(()=>{o.notify({type:"negative",message:"File deletion cancelled."})})};return(n,c)=>(b(),D(Yl,{rows:M(m),columns:[{name:"name",label:"Name",field:"fieldname",align:"left",sortable:!0},{name:"id",label:"ID",field:"number",align:"center",sortable:!0},{name:"type",label:"Type",field:"mimetype",align:"center",sortable:!0},{name:"size",label:"Size",field:"size",align:"center",sortable:!0},{name:"actions",label:"Actions",align:"center"}],pagination:{rowsPerPage:10,page:1,sortBy:"id",descending:!1}},{body:h(l=>[g(kl,{props:l},{default:h(()=>[g(ie,{key:"name",props:l},{default:h(()=>[S("div",Ta,[S("div",Ba,[l.row.thumbnail?(b(),D(rt,{key:0,src:`${M(s)()}/api/files/thumbnail/${l.row.uuid}`,style:{width:"50px",cursor:"pointer"},alt:l.row.originalname},{default:h(()=>[g(cl,{anchor:"bottom right",self:"top right"},{default:h(()=>[g(rt,{src:`${M(s)()}/api/files/thumbnail/${l.row.uuid}`,style:{width:"200px","max-width":"300px",border:"1px solid #ccc",background:"#fff","box-shadow":"0 2px 8px rgba(0, 0, 0, 0.2)"},alt:l.row.fieldname},null,8,["src","alt"])]),_:2},1024)]),_:2},1032,["src","alt"])):(b(),D(U,{key:1,name:"play_arrow",size:"sm",color:"primary"}))]),S("div",null,x(l.row.fieldname),1)])]),_:2},1032,["props"]),g(ie,{key:"id",props:l},{default:h(()=>[H(x(l.row.number),1)]),_:2},1032,["props"]),g(ie,{key:"type",props:l},{default:h(()=>[H(x(M(dl)(l.row.mimetype)),1)]),_:2},1032,["props"]),g(ie,{key:"size",props:l},{default:h(()=>[H(x(M(Ne)(l.row.size)),1)]),_:2},1032,["props"]),g(ie,{key:"actions",props:l},{default:h(()=>[g(O,{round:"",flat:"",dense:"",icon:"play_arrow",color:"primary",onClick:w=>M(u)(l.row.number)},null,8,["onClick"]),g(O,{round:"",flat:"",dense:"",icon:"info",color:"secondary",onClick:w=>r(l.row)},null,8,["onClick"]),g(O,{round:"",flat:"",dense:"",icon:"download",color:"primary",onClick:w=>M(oe)().downloadFile(l.row)},null,8,["onClick"]),g(O,{round:"",flat:"",dense:"",icon:"delete",color:"negative",onClick:w=>a(l.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"]))}},Da={class:"q-pa-md"},Ka={__name:"FilesPage",setup(e){return(o,i)=>(b(),q("div",Da,[g(we,{flat:""},{default:h(()=>[g(X,{class:"q-py-none"},{default:h(()=>[g(Sl)]),_:1}),g(X,{class:"q-py-xs"},{default:h(()=>[g(La)]),_:1}),g(X)]),_:1})]))}};export{Ka as default};
