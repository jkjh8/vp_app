import{c as L,o as b,w as k,a as y,j as Le,h as ae,g as q,b as S,Q as I,T as D,U as X,i as j,S as H,t as F,e as z,R as Q,V as Et,W as rt,X as st,k as Y,f as g,A as c,C as oe,l as re,B as It,Y as De,Z as Qe,G as Ht,q as ne,x as W,H as Wt,F as Ye,_ as it,I as Me,$ as Kt,a0 as Gt,y as ut,z as ct,a1 as Xt,a2 as Yt,a3 as Zt,a4 as Ze,a5 as Oe,a6 as Je,a7 as Jt,a8 as dt,a9 as el,aa as Be,ab as se,ac as tl,s as et}from"./index-C-q7_Wnp.js";import{b as je,a as ft,u as ll}from"./useStatus-D5ORqAiN.js";import{Q as al,a as ol,b as nl,u as rl,c as sl,d as mt,e as il,f as ul}from"./deleteFile-DYLqnnbe.js";import{u as vt,Q as tt}from"./use-dialog-plugin-component-DewEQrqM.js";import{_ as gt,Q as bt,a as cl,b as _e}from"./_plugin-vue_export-helper-B4JJX7vp.js";import{_ as te}from"./delayedTooltip-DdlCD6mt.js";import{h as Ae,f as dl}from"./useUtils-DZ6_BgJ-.js";import{u as le}from"./useFiles-C4sdp6rG.js";import{Q as lt}from"./QImg-DA22-pkh.js";import{Q as fl}from"./QMenu-D8yMM_tK.js";import{u as ml}from"./usePlayer-D9JhXoac.js";import"./format-CJebrXOQ.js";import"./position-engine-CREH_lGR.js";import"./socketio-BQBD-wP5.js";const vl={class:"row no-wrap items-center q-pa-md q-gutter-x-sm"},gl={class:"col q-px-sm"},bl={class:"q-uploader__subtitle"},yl=["onClick"],_l={__name:"updateFiles",setup(e){const o=je(),{dialogRef:i,onDialogOK:m}=vt(),{getAddr:n}=ft(),f=()=>`${n()}/api/files`,r=l=>{o.notify({type:"negative",message:`${l.length} file(s) did not pass validation constraints`})};return(l,s)=>(b(),L(st,{ref_key:"dialogRef",ref:i,persistent:""},{default:k(()=>[y(Le,{class:"rouneded"},{default:k(()=>[y(ae,{class:"q-pa-none"},{default:k(()=>[y(al,{flat:"",class:"uploader",style:{"background-color":"transparent",width:"100%"},"text-color":"grey-10",color:"grey-2",multiple:"",url:f,"field-name":u=>encodeURIComponent(u.name),accept:"image/*,video/*,audio/*",onRejected:r},{header:k(u=>[S("div",vl,[u.queuedFiles.length>0?(b(),L(Q,{key:0,round:"",flat:"",color:"primary",icon:"clear_all",onClick:u.removeQueuedFiles},{default:k(()=>[y(te,{msg:"Clear All"})]),_:2},1032,["onClick"])):j("",!0),u.uploadedFiles.length>0?(b(),L(Q,{key:1,round:"",flat:"",icon:"done_all",onClick:u.removeUploadedFiles},{default:k(()=>[y(te,{msg:"Remove Uploaded Files"})]),_:2},1032,["onClick"])):j("",!0),u.queuedFiles.length===0&&u.uploadedFiles.length===0?(b(),L(I,{key:2,name:"upload",size:"sm"})):j("",!0),u.isUploading?(b(),L(Et,{key:3,class:"q-uploader__spinner"})):j("",!0),S("div",gl,[s[0]||(s[0]=S("div",{class:"q-uploader__title"},"Upload Files",-1)),S("div",bl,F(u.uploadSizeLabel)+" / "+F(u.uploadProgressLabel),1)]),u.canAddFiles?(b(),L(Q,{key:4,round:"",flat:"",type:"a",color:"grey",icon:"add_box",onClick:u.pickFiles},{default:k(()=>[y(nl),y(te,{msg:"Pick Files"})]),_:2},1032,["onClick"])):j("",!0),u.canUpload?(b(),L(Q,{key:5,round:"",flat:"",color:"primary",icon:"cloud_upload",onClick:u.upload},{default:k(()=>[y(te,{msg:"Upload Files"})]),_:2},1032,["onClick"])):j("",!0),u.isUploading?(b(),L(Q,{key:6,round:"",flat:"",icon:"clear",onClick:u.abort},{default:k(()=>[y(te,{msg:"Abort Upload"})]),_:2},1032,["onClick"])):j("",!0)])]),list:k(u=>[u.files.length===0?(b(),q("div",{key:0,class:"empty-list-message q-pa-lg flex flex-center column items-center",onClick:u.pickFiles,style:{cursor:"pointer"}},[y(I,{name:"add_circle",size:"3rem",color:"grey-5"}),s[1]||(s[1]=S("div",{class:"text-h6 text-grey-7 q-mt-sm"},"Add Files",-1))],8,yl)):(b(),L(bt,{key:1,class:"fit"},{default:k(()=>[(b(!0),q(D,null,X(u.files,a=>(b(),L(cl,{key:a.name,class:"q-py-md"},{default:k(()=>[y(_e,null,{default:k(()=>[y(tt,null,{default:k(()=>[H(F(a.name),1)]),_:2},1024),y(tt,{caption:""},{default:k(()=>[H(F(z(Ae)(a.size))+" / "+F(a.__status),1)]),_:2},1024)]),_:2},1024),a.__status==="uploaded"?(b(),L(_e,{key:0,side:""},{default:k(()=>[y(I,{name:"done",color:"positive"})]),_:1})):j("",!0),a.__status==="failed"?(b(),L(_e,{key:1,side:""},{default:k(()=>[y(I,{name:"error",color:"negative"})]),_:1})):j("",!0),a.__status==="uploading"?(b(),L(_e,{key:2,side:"",class:"q-pa-none flex flex-center"},{default:k(()=>[y(ol,{"show-value":"",color:"primary",value:Math.round(a.__progress*100),size:"2rem",thickness:.4},null,8,["value"])]),_:2},1024)):j("",!0)]),_:2},1024))),128))]),_:2},1024))]),_:1},8,["field-name"])]),_:1}),y(rt,{align:"right"},{default:k(()=>[y(Q,{round:"",flat:"",icon:"cancel",color:"grey",onClick:z(m)},{default:k(()=>[y(te,{msg:"Close"})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512))}},hl=gt(_l,[["__scopeId","data-v-c58c3f45"]]),wl={class:"row no-wrap justify-between items-center"},Sl={class:"row no-wrap items-center q-gutter-x-sm"},kl={__name:"filesHeader",setup(e){const o=je(),i=()=>{o.dialog({component:hl}).onOk(()=>{le().getFileList()})};return(m,n)=>(b(),q("div",wl,[S("div",Sl,[y(I,{name:"folder",size:"md",color:"yellow"}),n[0]||(n[0]=S("div",{class:"text-title"},"Files",-1))]),S("div",null,[y(Q,{round:"",flat:"",color:"primary",icon:"add_circle",onClick:i})])]))}},ie=Y({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:o}){const i=re(),m=g(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return c("td",{class:m.value},oe(o.default));const n=i.vnode.key,f=(e.props.colsMap!==void 0?e.props.colsMap[n]:null)||e.props.col;if(f===void 0)return;const{row:r}=e.props;return c("td",{class:m.value+f.__tdClass(r),style:f.__tdStyle(r)},oe(o.default))}}}),pl=Y({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:o}){const i=g(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>c("tr",{style:e.props?.__trStyle,class:i.value},oe(o.default))}}),ql=Y({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:o,emit:i}){const m=re(),{proxy:{$q:n}}=m,f=r=>{i("click",r)};return()=>{if(e.props===void 0)return c("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:f},oe(o.default));let r,l;const s=m.vnode.key;if(s){if(r=e.props.colsMap[s],r===void 0)return}else r=e.props.col;if(r.sortable===!0){const a=r.align==="right"?"unshift":"push";l=It(o.default,[]),l[a](c(I,{class:r.__iconClass,name:n.iconSet.table.arrowUp}))}else l=oe(o.default);const u={class:r.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:r.headerStyle,onClick:a=>{r.sortable===!0&&e.props.sort(r),f(a)}};return c("th",u,l)}}}),Cl=["horizontal","vertical","cell","none"],xl=Y({name:"QMarkupTable",props:{...De,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Cl.includes(e)}},setup(e,{slots:o}){const i=re(),m=Qe(e,i.proxy.$q),n=g(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(m.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>c("div",{class:n.value},[c("table",{class:"q-table"},oe(o.default))])}});function yt(e,o){return c("div",e,[c("table",{class:"q-table"},o)])}const Pl={list:bt,table:xl},Fl=["list","table","__qtable"],Rl=Y({name:"QVirtualScroll",props:{...rl,type:{type:String,default:"list",validator:e=>Fl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Ht},setup(e,{slots:o,attrs:i}){let m;const n=ne(null),f=g(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:l,padVirtualScroll:s,onVirtualScrollEvt:u}=sl({virtualScrollLength:f,getVirtualScrollTarget:R,getVirtualScrollEl:P}),a=g(()=>{if(f.value===0)return[];const V=(N,O)=>({index:r.value.from+O,item:N});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map(V):e.itemsFn(r.value.from,r.value.to-r.value.from).map(V)}),v=g(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),x=g(()=>e.scrollTarget!==void 0?{}:{tabindex:0});W(f,()=>{l()}),W(()=>e.scrollTarget,()=>{p(),C()});function P(){return n.value.$el||n.value}function R(){return m}function C(){m=Wt(P(),e.scrollTarget),m.addEventListener("scroll",u,Ye.passive)}function p(){m!==void 0&&(m.removeEventListener("scroll",u,Ye.passive),m=void 0)}function A(){let V=s(e.type==="list"?"div":"tbody",a.value.map(o.default));return o.before!==void 0&&(V=o.before().concat(V)),ct(o.after,V)}return it(()=>{l()}),Me(()=>{C()}),Kt(()=>{C()}),Gt(()=>{p()}),ut(()=>{p()}),()=>{if(o.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?yt({ref:n,class:"q-table__middle "+v.value},A()):c(Pl[e.type],{...i,ref:n,class:[i.class,v.value],...x.value},A)}}}),$l={xs:2,sm:4,md:6,lg:10,xl:14};function at(e,o,i){return{transform:o===!0?`translateX(${i.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const Tl=Y({name:"QLinearProgress",props:{...De,...Xt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:o}){const{proxy:i}=re(),m=Qe(e,i.$q),n=Yt(e,$l),f=g(()=>e.indeterminate===!0||e.query===!0),r=g(()=>e.reverse!==e.query),l=g(()=>({...n.value!==null?n.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),s=g(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),u=g(()=>at(e.buffer!==void 0?e.buffer:1,r.value,i.$q)),a=g(()=>`with${e.instantFeedback===!0?"out":""}-transition`),v=g(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${a.value} q-linear-progress__track--${m.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),x=g(()=>at(f.value===!0?1:e.value,r.value,i.$q)),P=g(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${a.value} q-linear-progress__model--${f.value===!0?"in":""}determinate`),R=g(()=>({width:`${e.value*100}%`})),C=g(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${a.value}`);return()=>{const p=[c("div",{class:v.value,style:u.value}),c("div",{class:P.value,style:x.value})];return e.stripe===!0&&f.value===!1&&p.push(c("div",{class:C.value,style:R.value})),c("div",{class:s.value,style:l.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},ct(o.default,p))}}});let ue=0;const Bl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Ol=["update:fullscreen","fullscreen"];function Ll(){const e=re(),{props:o,emit:i,proxy:m}=e;let n,f,r;const l=ne(!1);Zt(e)===!0&&W(()=>m.$route.fullPath,()=>{o.noRouteFullscreenExit!==!0&&a()}),W(()=>o.fullscreen,v=>{l.value!==v&&s()}),W(l,v=>{i("update:fullscreen",v),i("fullscreen",v)});function s(){l.value===!0?a():u()}function u(){l.value!==!0&&(l.value=!0,r=m.$el.parentNode,r.replaceChild(f,m.$el),document.body.appendChild(m.$el),ue++,ue===1&&document.body.classList.add("q-body--fullscreen-mixin"),n={handler:a},Ze.add(n))}function a(){l.value===!0&&(n!==void 0&&(Ze.remove(n),n=void 0),r.replaceChild(m.$el,f),l.value=!1,ue=Math.max(0,ue-1),ue===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),m.$el.scrollIntoView!==void 0&&setTimeout(()=>{m.$el.scrollIntoView()})))}return it(()=>{f=document.createElement("span")}),Me(()=>{o.fullscreen===!0&&u()}),ut(a),Object.assign(m,{toggleFullscreen:s,setFullscreen:u,exitFullscreen:a}),{inFullscreen:l,toggleFullscreen:s}}function Dl(e,o){return new Date(e)-new Date(o)}const Ql={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Ml(e,o,i,m){const n=g(()=>{const{sortBy:l}=o.value;return l&&i.value.find(s=>s.name===l)||null}),f=g(()=>e.sortMethod!==void 0?e.sortMethod:(l,s,u)=>{const a=i.value.find(P=>P.name===s);if(a===void 0||a.field===void 0)return l;const v=u===!0?-1:1,x=typeof a.field=="function"?P=>a.field(P):P=>P[a.field];return l.sort((P,R)=>{let C=x(P),p=x(R);return a.rawSort!==void 0?a.rawSort(C,p,P,R)*v:C==null?-1*v:p==null?1*v:a.sort!==void 0?a.sort(C,p,P,R)*v:Oe(C)===!0&&Oe(p)===!0?(C-p)*v:Je(C)===!0&&Je(p)===!0?Dl(C,p)*v:typeof C=="boolean"&&typeof p=="boolean"?(C-p)*v:([C,p]=[C,p].map(A=>(A+"").toLocaleString().toLowerCase()),C<p?-1*v:C===p?0:v)})});function r(l){let s=e.columnSortOrder;if(Jt(l)===!0)l.sortOrder&&(s=l.sortOrder),l=l.name;else{const v=i.value.find(x=>x.name===l);v?.sortOrder&&(s=v.sortOrder)}let{sortBy:u,descending:a}=o.value;u!==l?(u=l,a=s==="da"):e.binaryStateSort===!0?a=!a:a===!0?s==="ad"?u=null:a=!1:s==="ad"?a=!0:u=null,m({sortBy:u,descending:a,page:1})}return{columnToSort:n,computedSortMethod:f,sort:r}}const jl={filter:[String,Object],filterMethod:Function};function Al(e,o){const i=g(()=>e.filterMethod!==void 0?e.filterMethod:(m,n,f,r)=>{const l=n?n.toLowerCase():"";return m.filter(s=>f.some(u=>{const a=r(u,s)+"";return(a==="undefined"||a==="null"?"":a.toLowerCase()).indexOf(l)!==-1}))});return W(()=>e.filter,()=>{dt(()=>{o({page:1},!0)})},{deep:!0}),{computedFilterMethod:i}}function Vl(e,o){for(const i in o)if(o[i]!==e[i])return!1;return!0}function ot(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const zl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Nl(e,o){const{props:i,emit:m}=e,n=ne(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:i.rowsPerPageOptions.length!==0?i.rowsPerPageOptions[0]:5},i.pagination)),f=g(()=>{const a=i["onUpdate:pagination"]!==void 0?{...n.value,...i.pagination}:n.value;return ot(a)}),r=g(()=>f.value.rowsNumber!==void 0);function l(a){s({pagination:a,filter:i.filter})}function s(a={}){dt(()=>{m("request",{pagination:a.pagination||f.value,filter:a.filter||i.filter,getCellValue:o})})}function u(a,v){const x=ot({...f.value,...a});if(Vl(f.value,x)===!0){r.value===!0&&v===!0&&l(x);return}if(r.value===!0){l(x);return}i.pagination!==void 0&&i["onUpdate:pagination"]!==void 0?m("update:pagination",x):n.value=x}return{innerPagination:n,computedPagination:f,isServerSide:r,requestServerInteraction:s,setPagination:u}}function Ul(e,o,i,m,n,f){const{props:r,emit:l,proxy:{$q:s}}=e,u=g(()=>m.value===!0?i.value.rowsNumber||0:f.value),a=g(()=>{const{page:O,rowsPerPage:M}=i.value;return(O-1)*M}),v=g(()=>{const{page:O,rowsPerPage:M}=i.value;return O*M}),x=g(()=>i.value.page===1),P=g(()=>i.value.rowsPerPage===0?1:Math.max(1,Math.ceil(u.value/i.value.rowsPerPage))),R=g(()=>v.value===0?!0:i.value.page>=P.value),C=g(()=>(r.rowsPerPageOptions.includes(o.value.rowsPerPage)?r.rowsPerPageOptions:[o.value.rowsPerPage].concat(r.rowsPerPageOptions)).map(M=>({label:M===0?s.lang.table.allRows:""+M,value:M})));W(P,(O,M)=>{if(O===M)return;const ce=i.value.page;O&&!ce?n({page:1}):O<ce&&n({page:O})});function p(){n({page:1})}function A(){const{page:O}=i.value;O>1&&n({page:O-1})}function V(){const{page:O,rowsPerPage:M}=i.value;v.value>0&&O*M<u.value&&n({page:O+1})}function N(){n({page:P.value})}return r["onUpdate:pagination"]!==void 0&&l("update:pagination",{...i.value}),{firstRowIndex:a,lastRowIndex:v,isFirstPage:x,isLastPage:R,pagesNumber:P,computedRowsPerPageOptions:C,computedRowsNumber:u,firstPage:p,prevPage:A,nextPage:V,lastPage:N}}const El={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Il=["update:selected","selection"];function Hl(e,o,i,m){const n=g(()=>{const R={};return e.selected.map(m.value).forEach(C=>{R[C]=!0}),R}),f=g(()=>e.selection!=="none"),r=g(()=>e.selection==="single"),l=g(()=>e.selection==="multiple"),s=g(()=>i.value.length!==0&&i.value.every(R=>n.value[m.value(R)]===!0)),u=g(()=>s.value!==!0&&i.value.some(R=>n.value[m.value(R)]===!0)),a=g(()=>e.selected.length);function v(R){return n.value[R]===!0}function x(){o("update:selected",[])}function P(R,C,p,A){o("selection",{rows:C,added:p,keys:R,evt:A});const V=r.value===!0?p===!0?C:[]:p===!0?e.selected.concat(C):e.selected.filter(N=>R.includes(m.value(N))===!1);o("update:selected",V)}return{hasSelectionMode:f,singleSelection:r,multipleSelection:l,allRowsSelected:s,someRowsSelected:u,rowsSelectedNumber:a,isRowSelected:v,clearSelection:x,updateSelection:P}}function nt(e){return Array.isArray(e)?e.slice():[]}const Wl={expanded:Array},Kl=["update:expanded"];function Gl(e,o){const i=ne(nt(e.expanded));W(()=>e.expanded,r=>{i.value=nt(r)});function m(r){return i.value.includes(r)}function n(r){e.expanded!==void 0?o("update:expanded",r):i.value=r}function f(r,l){const s=i.value.slice(),u=s.indexOf(r);l===!0?u===-1&&(s.push(r),n(s)):u!==-1&&(s.splice(u,1),n(s))}return{isRowExpanded:m,setExpanded:n,updateExpanded:f}}const Xl={visibleColumns:Array};function Yl(e,o,i){const m=g(()=>{if(e.columns!==void 0)return e.columns;const l=e.rows[0];return l!==void 0?Object.keys(l).map(s=>({name:s,label:s.toUpperCase(),field:s,align:Oe(l[s])?"right":"left",sortable:!0})):[]}),n=g(()=>{const{sortBy:l,descending:s}=o.value;return(e.visibleColumns!==void 0?m.value.filter(a=>a.required===!0||e.visibleColumns.includes(a.name)===!0):m.value).map(a=>{const v=a.align||"right",x=`text-${v}`;return{...a,align:v,__iconClass:`q-table__sort-icon q-table__sort-icon--${v}`,__thClass:x+(a.headerClasses!==void 0?" "+a.headerClasses:"")+(a.sortable===!0?" sortable":"")+(a.name===l?` sorted ${s===!0?"sort-desc":""}`:""),__tdStyle:a.style!==void 0?typeof a.style!="function"?()=>a.style:a.style:()=>null,__tdClass:a.classes!==void 0?typeof a.classes!="function"?()=>x+" "+a.classes:P=>x+" "+a.classes(P):()=>x}})}),f=g(()=>{const l={};return n.value.forEach(s=>{l[s.name]=s}),l}),r=g(()=>e.tableColspan!==void 0?e.tableColspan:n.value.length+(i.value===!0?1:0));return{colList:m,computedCols:n,computedColsMap:f,computedColspan:r}}const he="q-table__bottom row items-center",_t={};mt.forEach(e=>{_t[e]={}});const Zl=Y({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},..._t,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...De,...Bl,...Xl,...jl,...zl,...Wl,...El,...Ql},emits:["request","virtualScroll",...Ol,...Kl,...Il],setup(e,{slots:o,emit:i}){const m=re(),{proxy:{$q:n}}=m,f=Qe(e,n),{inFullscreen:r,toggleFullscreen:l}=Ll(),s=g(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),u=ne(null),a=ne(null),v=g(()=>e.grid!==!0&&e.virtualScroll===!0),x=g(()=>" q-table__card"+(f.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),P=g(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":x.value)+(f.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(r.value===!0?" fullscreen scroll":"")),R=g(()=>P.value+(e.loading===!0?" q-table--loading":""));W(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+P.value,()=>{v.value===!0&&a.value?.reset()});const{innerPagination:C,computedPagination:p,isServerSide:A,requestServerInteraction:V,setPagination:N}=Nl(m,J),{computedFilterMethod:O}=Al(e,N),{isRowExpanded:M,setExpanded:ce,updateExpanded:ht}=Gl(e,i),we=g(()=>{let t=e.rows;if(A.value===!0||t.length===0)return t;const{sortBy:d,descending:_}=p.value;return e.filter&&(t=O.value(t,e.filter,E.value,J)),qt.value!==null&&(t=Ct.value(e.rows===t?t.slice():t,d,_)),t}),Ve=g(()=>we.value.length),K=g(()=>{let t=we.value;if(A.value===!0)return t;const{rowsPerPage:d}=p.value;return d!==0&&(fe.value===0&&e.rows!==t?t.length>me.value&&(t=t.slice(0,me.value)):t=t.slice(fe.value,me.value)),t}),{hasSelectionMode:Z,singleSelection:wt,multipleSelection:ze,allRowsSelected:St,someRowsSelected:Ne,rowsSelectedNumber:Se,isRowSelected:ke,clearSelection:kt,updateSelection:de}=Hl(e,i,K,s),{colList:pt,computedCols:E,computedColsMap:Ue,computedColspan:Ee}=Yl(e,p,Z),{columnToSort:qt,computedSortMethod:Ct,sort:pe}=Ml(e,p,pt,N),{firstRowIndex:fe,lastRowIndex:me,isFirstPage:qe,isLastPage:Ce,pagesNumber:ve,computedRowsPerPageOptions:xt,computedRowsNumber:ge,firstPage:xe,prevPage:Pe,nextPage:Fe,lastPage:Re}=Ul(m,C,p,A,N,Ve),Pt=g(()=>K.value.length===0),Ft=g(()=>{const t={};return mt.forEach(d=>{t[d]=e[d]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function Rt(){v.value===!0&&a.value.reset()}function $t(){if(e.grid===!0)return Nt();const t=e.hideHeader!==!0?Ge:null;if(v.value===!0){const _=o["top-row"],h=o["bottom-row"],w={default:B=>He(B.item,o.body,B.index)};if(_!==void 0){const B=c("tbody",_({cols:E.value}));w.before=t===null?()=>B:()=>[t()].concat(B)}else t!==null&&(w.before=t);return h!==void 0&&(w.after=()=>c("tbody",h({cols:E.value}))),c(Rl,{ref:a,class:e.tableClass,style:e.tableStyle,...Ft.value,scrollTarget:e.virtualScrollTarget,items:K.value,type:"__qtable",tableColspan:Ee.value,onVirtualScroll:Bt},w)}const d=[Ot()];return t!==null&&d.unshift(t()),yt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},d)}function Tt(t,d){if(a.value!==null){a.value.scrollTo(t,d);return}t=parseInt(t,10);const _=u.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(_!==null){const h=u.value.querySelector(".q-table__middle.scroll"),w=_.offsetTop-e.virtualScrollStickySizeStart,B=w<h.scrollTop?"decrease":"increase";h.scrollTop=w,i("virtualScroll",{index:t,from:0,to:C.value.rowsPerPage-1,direction:B})}}function Bt(t){i("virtualScroll",t)}function Ie(){return[c(Tl,{class:"q-table__linear-progress",color:e.color,dark:f.value,indeterminate:!0,trackColor:"transparent"})]}function He(t,d,_){const h=s.value(t),w=ke(h);if(d!==void 0){const T={key:h,row:t,pageIndex:_,__trClass:w?"selected":""};if(e.tableRowStyleFn!==void 0&&(T.__trStyle=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const G=e.tableRowClassFn(t);G&&(T.__trClass=`${G} ${T.__trClass}`)}return d(We(T))}const B=o["body-cell"],$=E.value.map(T=>{const G=o[`body-cell-${T.name}`],ye=G!==void 0?G:B;return ye!==void 0?ye(Lt({key:h,row:t,pageIndex:_,col:T})):c("td",{class:T.__tdClass(t),style:T.__tdStyle(t)},J(T,t))});if(Z.value===!0){const T=o["body-selection"],G=T!==void 0?T(Dt({key:h,row:t,pageIndex:_})):[c(Be,{modelValue:w,color:e.color,dark:f.value,dense:e.dense,"onUpdate:modelValue":(ye,Ut)=>{de([h],[t],ye,Ut)}})];$.unshift(c("td",{class:"q-table--col-auto-width"},G))}const U={key:h,class:{selected:w}};if(e.onRowClick!==void 0&&(U.class["cursor-pointer"]=!0,U.onClick=T=>{i("rowClick",T,t,_)}),e.onRowDblclick!==void 0&&(U.class["cursor-pointer"]=!0,U.onDblclick=T=>{i("rowDblclick",T,t,_)}),e.onRowContextmenu!==void 0&&(U.class["cursor-pointer"]=!0,U.onContextmenu=T=>{i("rowContextmenu",T,t,_)}),e.tableRowStyleFn!==void 0&&(U.style=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const T=e.tableRowClassFn(t);T&&(U.class[T]=!0)}return c("tr",U,$)}function Ot(){const t=o.body,d=o["top-row"],_=o["bottom-row"];let h=K.value.map((w,B)=>He(w,t,B));return d!==void 0&&(h=d({cols:E.value}).concat(h)),_!==void 0&&(h=h.concat(_({cols:E.value}))),c("tbody",h)}function We(t){return $e(t),t.cols=t.cols.map(d=>se({...d},"value",()=>J(d,t.row))),t}function Lt(t){return $e(t),se(t,"value",()=>J(t.col,t.row)),t}function Dt(t){return $e(t),t}function $e(t){Object.assign(t,{cols:E.value,colsMap:Ue.value,sort:pe,rowIndex:fe.value+t.pageIndex,color:e.color,dark:f.value,dense:e.dense}),Z.value===!0&&se(t,"selected",()=>ke(t.key),(d,_)=>{de([t.key],[t.row],d,_)}),se(t,"expand",()=>M(t.key),d=>{ht(t.key,d)})}function J(t,d){const _=typeof t.field=="function"?t.field(d):d[t.field];return t.format!==void 0?t.format(_,d):_}const ee=g(()=>({pagination:p.value,pagesNumber:ve.value,isFirstPage:qe.value,isLastPage:Ce.value,firstPage:xe,prevPage:Pe,nextPage:Fe,lastPage:Re,inFullscreen:r.value,toggleFullscreen:l}));function Qt(){const t=o.top,d=o["top-left"],_=o["top-right"],h=o["top-selection"],w=Z.value===!0&&h!==void 0&&Se.value>0,B="q-table__top relative-position row items-center";if(t!==void 0)return c("div",{class:B},[t(ee.value)]);let $;if(w===!0?$=h(ee.value).slice():($=[],d!==void 0?$.push(c("div",{class:"q-table__control"},[d(ee.value)])):e.title&&$.push(c("div",{class:"q-table__control"},[c("div",{class:["q-table__title",e.titleClass]},e.title)]))),_!==void 0&&($.push(c("div",{class:"q-table__separator col"})),$.push(c("div",{class:"q-table__control"},[_(ee.value)]))),$.length!==0)return c("div",{class:B},$)}const Ke=g(()=>Ne.value===!0?null:St.value);function Ge(){const t=Mt();return e.loading===!0&&o.loading===void 0&&t.push(c("tr",{class:"q-table__progress"},[c("th",{class:"relative-position",colspan:Ee.value},Ie())])),c("thead",t)}function Mt(){const t=o.header,d=o["header-cell"];if(t!==void 0)return t(Te({header:!0})).slice();const _=E.value.map(h=>{const w=o[`header-cell-${h.name}`],B=w!==void 0?w:d,$=Te({col:h});return B!==void 0?B($):c(ql,{key:h.name,props:$},()=>h.label)});if(wt.value===!0&&e.grid!==!0)_.unshift(c("th",{class:"q-table--col-auto-width"}," "));else if(ze.value===!0){const h=o["header-selection"],w=h!==void 0?h(Te({})):[c(Be,{color:e.color,modelValue:Ke.value,dark:f.value,dense:e.dense,"onUpdate:modelValue":Xe})];_.unshift(c("th",{class:"q-table--col-auto-width"},w))}return[c("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},_)]}function Te(t){return Object.assign(t,{cols:E.value,sort:pe,colsMap:Ue.value,color:e.color,dark:f.value,dense:e.dense}),ze.value===!0&&se(t,"selected",()=>Ke.value,Xe),t}function Xe(t){Ne.value===!0&&(t=!1),de(K.value.map(s.value),K.value,t)}const be=g(()=>{const t=[e.iconFirstPage||n.iconSet.table.firstPage,e.iconPrevPage||n.iconSet.table.prevPage,e.iconNextPage||n.iconSet.table.nextPage,e.iconLastPage||n.iconSet.table.lastPage];return n.lang.rtl===!0?t.reverse():t});function jt(){if(e.hideBottom===!0)return;if(Pt.value===!0){if(e.hideNoData===!0)return;const _=e.loading===!0?e.loadingLabel||n.lang.table.loading:e.filter?e.noResultsLabel||n.lang.table.noResults:e.noDataLabel||n.lang.table.noData,h=o["no-data"],w=h!==void 0?[h({message:_,icon:n.iconSet.table.warning,filter:e.filter})]:[c(I,{class:"q-table__bottom-nodata-icon",name:n.iconSet.table.warning}),_];return c("div",{class:he+" q-table__bottom--nodata"},w)}const t=o.bottom;if(t!==void 0)return c("div",{class:he},[t(ee.value)]);const d=e.hideSelectedBanner!==!0&&Z.value===!0&&Se.value>0?[c("div",{class:"q-table__control"},[c("div",[(e.selectedRowsLabel||n.lang.table.selectedRecords)(Se.value)])])]:[];if(e.hidePagination!==!0)return c("div",{class:he+" justify-end"},Vt(d));if(d.length!==0)return c("div",{class:he},d)}function At(t){N({page:1,rowsPerPage:t.value})}function Vt(t){let d;const{rowsPerPage:_}=p.value,h=e.paginationLabel||n.lang.table.pagination,w=o.pagination,B=e.rowsPerPageOptions.length>1;if(t.push(c("div",{class:"q-table__separator col"})),B===!0&&t.push(c("div",{class:"q-table__control"},[c("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||n.lang.table.recordsPerPage]),c(il,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:_,options:xt.value,displayValue:_===0?n.lang.table.allRows:_,dark:f.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":At})])),w!==void 0)d=w(ee.value);else if(d=[c("span",_!==0?{class:"q-table__bottom-item"}:{},[_?h(fe.value+1,Math.min(me.value,ge.value),ge.value):h(1,Ve.value,ge.value)])],_!==0&&ve.value>1){const $={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&($.size="sm"),ve.value>2&&d.push(c(Q,{key:"pgFirst",...$,icon:be.value[0],disable:qe.value,ariaLabel:n.lang.pagination.first,onClick:xe})),d.push(c(Q,{key:"pgPrev",...$,icon:be.value[1],disable:qe.value,ariaLabel:n.lang.pagination.prev,onClick:Pe}),c(Q,{key:"pgNext",...$,icon:be.value[2],disable:Ce.value,ariaLabel:n.lang.pagination.next,onClick:Fe})),ve.value>2&&d.push(c(Q,{key:"pgLast",...$,icon:be.value[3],disable:Ce.value,ariaLabel:n.lang.pagination.last,onClick:Re}))}return t.push(c("div",{class:"q-table__control"},d)),t}function zt(){const t=e.gridHeader===!0?[c("table",{class:"q-table"},[Ge()])]:e.loading===!0&&o.loading===void 0?Ie():void 0;return c("div",{class:"q-table__middle"},t)}function Nt(){const t=o.item!==void 0?o.item:d=>{const _=d.cols.map(w=>c("div",{class:"q-table__grid-item-row"},[c("div",{class:"q-table__grid-item-title"},[w.label]),c("div",{class:"q-table__grid-item-value"},[w.value])]));if(Z.value===!0){const w=o["body-selection"],B=w!==void 0?w(d):[c(Be,{modelValue:d.selected,color:e.color,dark:f.value,dense:e.dense,"onUpdate:modelValue":($,U)=>{de([d.key],[d.row],$,U)}})];_.unshift(c("div",{class:"q-table__grid-item-row"},B),c(tl,{dark:f.value}))}const h={class:["q-table__grid-item-card"+x.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(h.style=[h.style,e.cardStyleFn(d.row)]),e.cardClassFn!==void 0){const w=e.cardClassFn(d.row);w&&(h.class[0]+=` ${w}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(h.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(h.onClick=w=>{i("RowClick",w,d.row,d.pageIndex)}),e.onRowDblclick!==void 0&&(h.onDblclick=w=>{i("RowDblclick",w,d.row,d.pageIndex)}),e.onRowContextmenu!==void 0&&(h.onContextmenu=w=>{i("rowContextmenu",w,d.row,d.pageIndex)})),c("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(d.selected===!0?" q-table__grid-item--selected":"")},[c("div",h,_)])};return c("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},K.value.map((d,_)=>t(We({key:s.value(d),row:d,pageIndex:_}))))}return Object.assign(m.proxy,{requestServerInteraction:V,setPagination:N,firstPage:xe,prevPage:Pe,nextPage:Fe,lastPage:Re,isRowSelected:ke,clearSelection:kt,isRowExpanded:M,setExpanded:ce,sort:pe,resetVirtualScroll:Rt,scrollTo:Tt,getCellValue:J}),el(m.proxy,{filteredSortedRows:()=>we.value,computedRows:()=>K.value,computedRowsNumber:()=>ge.value}),()=>{const t=[Qt()],d={ref:u,class:R.value};return e.grid===!0?t.push(zt()):Object.assign(d,{class:[d.class,e.cardClass],style:e.cardStyle}),t.push($t(),jt()),e.loading===!0&&o.loading!==void 0&&t.push(o.loading()),c("div",d,t)}}}),Jl={class:"row items-center q-pa-md"},ea={class:"text-h6"},ta={key:0},la={class:"q-ml-md q-mb-md"},aa={class:"text-primary",style:{"min-width":"120px","word-break":"break-all"}},oa={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},na={key:1,class:"q-ml-md"},ra={class:"text-primary",style:{"min-width":"100px","word-break":"break-all"}},sa={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},ia={key:0},ua={key:1},ca={class:"q-ml-md q-mb-md"},da={class:"row items-start q-mb-xs"},fa={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},ma={class:"q-ml-md q-mb-md"},va={class:"text-primary",style:{"min-width":"120px","word-break":"break-all"}},ga={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},ba={key:0,class:"q-ml-md"},ya={class:"text-primary",style:{"min-width":"100px","word-break":"break-all"}},_a={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},ha={class:"q-ml-md q-mb-md"},wa={class:"text-primary",style:{"min-width":"120px","word-break":"break-all"}},Sa={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},ka={key:0,class:"q-ml-md"},pa={class:"text-primary",style:{"min-width":"100px","word-break":"break-all"}},qa={class:"q-ml-sm",style:{"word-break":"break-all","white-space":"pre-line"}},Ca={key:1},xa={__name:"metaData",props:{fieldname:{type:String,default:"Metadata"},metadata:{type:Object,default:()=>({})}},setup(e){const{dialogRef:o,onDialogOK:i}=vt(),m=e,n=g(()=>{const f=m.metadata||{},r={};if(f.format&&(r.format=f.format),f.mimetype?r.mimetype=f.mimetype:f.format&&f.format.format_name&&(r.mimetype=f.format.format_name),Array.isArray(f.streams)){const l=f.streams.find(u=>u.codec_type==="audio"),s=f.streams.find(u=>u.codec_type==="video");l&&(r["audio format"]={codec_name:l.codec_name,codec_long_name:l.codec_long_name,profile:l.profile,sample_rate:l.sample_rate,channels:l.channels,channel_layout:l.channel_layout,bit_rate:l.bit_rate,...l.tags?{tags:l.tags}:{}}),s&&(r["video format"]={codec_name:s.codec_name,codec_long_name:s.codec_long_name,profile:s.profile,width:s.width,height:s.height,pix_fmt:s.pix_fmt,bit_rate:s.bit_rate,...s.tags?{tags:s.tags}:{}})}return r});return(f,r)=>(b(),L(st,{ref_key:"dialogRef",ref:o,persistent:""},{default:k(()=>[y(Le,{class:"meta-dialog-card"},{default:k(()=>[y(ae,null,{default:k(()=>[S("div",Jl,[y(I,{name:"info",color:"primary",size:"sm",class:"q-mr-sm"}),S("div",ea,F(m.fieldname),1)])]),_:1}),y(ae,{class:"meta-scroll-area"},{default:k(()=>[Object.keys(n.value).length?(b(),q("div",ta,[n.value.format?(b(),q(D,{key:0},[r[0]||(r[0]=S("div",{class:"q-mb-sm text-primary",style:{"font-weight":"bold"}},"format",-1)),S("div",la,[(b(!0),q(D,null,X(n.value.format,(l,s)=>(b(),q("div",{key:"format-"+s,class:"row items-start q-mb-xs"},[S("div",aa,F(s),1),S("div",oa,[s==="filename"?(b(),q(D,{key:0},[H(F(m.fieldname),1)],64)):s==="tags"&&typeof l=="object"&&l?(b(),q("div",na,[(b(!0),q(D,null,X(l,(u,a)=>(b(),q("div",{key:"format-tags-"+a,class:"row items-start q-mb-xs"},[S("div",ra,F(a),1),S("div",sa,F(u),1)]))),128))])):s==="size"&&typeof l=="number"?(b(),q(D,{key:2},[H(F(z(Ae)(l)),1)],64)):(b(),q(D,{key:3},[typeof l=="string"&&/%[0-9A-Fa-f]{2}/.test(l)?(b(),q("span",ia,F(decodeURIComponent(l)),1)):(b(),q("span",ua,F(typeof l=="number"?l.toLocaleString():l),1))],64))])]))),128))])],64)):j("",!0),n.value.mimetype?(b(),q(D,{key:1},[r[2]||(r[2]=S("div",{class:"q-mb-sm text-primary",style:{"font-weight":"bold"}},"mimetype",-1)),S("div",ca,[S("div",da,[r[1]||(r[1]=S("div",{class:"text-primary",style:{"min-width":"120px","word-break":"break-all"}}," value ",-1)),S("div",fa,F(n.value.mimetype),1)])])],64)):j("",!0),n.value["audio format"]?(b(),q(D,{key:2},[r[3]||(r[3]=S("div",{class:"q-mb-sm text-primary",style:{"font-weight":"bold"}},"audio format",-1)),S("div",ma,[(b(!0),q(D,null,X(n.value["audio format"],(l,s)=>(b(),q("div",{key:"audio-"+s,class:"row items-start q-mb-xs"},[S("div",va,F(s),1),S("div",ga,[s==="tags"&&typeof l=="object"&&l?(b(),q("div",ba,[(b(!0),q(D,null,X(l,(u,a)=>(b(),q("div",{key:"audio-tags-"+a,class:"row items-start q-mb-xs"},[S("div",ya,F(a),1),S("div",_a,F(u),1)]))),128))])):(b(),q(D,{key:1},[H(F(typeof l=="number"?l.toLocaleString():l),1)],64))])]))),128))])],64)):j("",!0),n.value["video format"]?(b(),q(D,{key:3},[r[4]||(r[4]=S("div",{class:"q-mb-sm text-primary",style:{"font-weight":"bold"}},"video format",-1)),S("div",ha,[(b(!0),q(D,null,X(n.value["video format"],(l,s)=>(b(),q("div",{key:"video-"+s,class:"row items-start q-mb-xs"},[S("div",wa,F(s),1),S("div",Sa,[s==="tags"&&typeof l=="object"&&l?(b(),q("div",ka,[(b(!0),q(D,null,X(l,(u,a)=>(b(),q("div",{key:"video-tags-"+a,class:"row items-start q-mb-xs"},[S("div",pa,F(a),1),S("div",qa,F(u),1)]))),128))])):(b(),q(D,{key:1},[H(F(typeof l=="number"?l.toLocaleString():l),1)],64))])]))),128))])],64)):j("",!0)])):(b(),q("div",Ca,r[5]||(r[5]=[S("em",{class:"text-grey"},"표시할 메타데이터가 없습니다.",-1)])))]),_:1}),y(rt,{class:"justify-end q-pa-md q-mr-md"},{default:k(()=>[y(Q,{round:"",icon:"check",color:"primary",size:"sm",onClick:z(i)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},512))}},Pa=gt(xa,[["__scopeId","data-v-fa50de74"]]),Fa={class:"row no-wrap items-center"},Ra={style:{width:"70px",display:"flex","align-items":"center","justify-content":"center",position:"relative"}},$a={__name:"filesList",setup(e){const o=je(),{getFileList:i}=le(),{files:m}=et(le()),{pStatus:n}=et(ll()),{getAddr:f}=ft(),{fnPlayById:r}=ml();Me(async()=>{await i()});const l=u=>{o.dialog({component:Pa,componentProps:{fieldname:u.fieldname,metadata:u.metadata}})},s=u=>{o.dialog({component:ul,componentProps:{fileName:u.fieldname}}).onOk(()=>{try{o.loading.show({message:`Deleting file with ID ${u.fieldname}...`}),o.notify({type:"positive",message:`File with ID ${u.fieldname} deleted successfully.`}),le().deleteFile(u),le().getFileList()}catch(a){o.notify({type:"negative",message:`Error deleting file with ID ${u.fieldname}: ${a.message}`})}finally{o.loading.hide()}}).onCancel(()=>{o.notify({type:"negative",message:"File deletion cancelled."})})};return(u,a)=>(b(),L(Zl,{rows:z(m),columns:[{name:"name",label:"Name",field:"filename",align:"left",sortable:!0},{name:"id",label:"ID",field:"number",align:"center",sortable:!0},{name:"type",label:"Type",field:"mimetype",align:"center",sortable:!0},{name:"size",label:"Size",field:"size",align:"center",sortable:!0},{name:"actions",label:"Actions",align:"center"}],pagination:{rowsPerPage:10,page:1,sortBy:"id",descending:!1}},{body:k(v=>[y(pl,{props:v},{default:k(()=>[y(ie,{key:"name",props:v},{default:k(()=>[S("div",Fa,[S("div",Ra,[v.row.thumbnail?(b(),L(lt,{key:0,src:`${z(f)()}/api/files/thumbnail/${v.row.uuid}`,style:{width:"50px",cursor:"pointer"},alt:v.row.originalname},{default:k(()=>[y(fl,{anchor:"bottom right",self:"top right"},{default:k(()=>[y(lt,{src:`${z(f)()}/api/files/thumbnail/${v.row.uuid}`,style:{width:"200px","max-width":"300px",border:"1px solid #ccc",background:"#fff","box-shadow":"0 2px 8px rgba(0, 0, 0, 0.2)"},alt:v.row.filename},null,8,["src","alt"])]),_:2},1024)]),_:2},1032,["src","alt"])):(b(),L(I,{key:1,name:"play_arrow",size:"sm",color:"primary"}))]),S("div",null,F(v.row.filename),1)])]),_:2},1032,["props"]),y(ie,{key:"id",props:v},{default:k(()=>[H(F(v.row.number),1)]),_:2},1032,["props"]),y(ie,{key:"type",props:v},{default:k(()=>[H(F(z(dl)(v.row.mimetype)),1)]),_:2},1032,["props"]),y(ie,{key:"size",props:v},{default:k(()=>[H(F(z(Ae)(v.row.size)),1)]),_:2},1032,["props"]),y(ie,{key:"actions",props:v},{default:k(()=>[y(Q,{round:"",flat:"",dense:"",icon:"play_arrow",color:"primary",onClick:()=>{z(n).playlistMode=!1,z(r)(v.row.number)}},null,8,["onClick"]),y(Q,{round:"",flat:"",dense:"",icon:"info",color:"secondary",onClick:x=>l(v.row)},null,8,["onClick"]),y(Q,{round:"",flat:"",dense:"",icon:"download",color:"primary",onClick:x=>z(le)().downloadFile(v.row)},null,8,["onClick"]),y(Q,{round:"",flat:"",dense:"",icon:"delete",color:"negative",onClick:x=>s(v.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"]))}},Ta={class:"q-pa-md"},Ha={__name:"FilesPage",setup(e){return(o,i)=>(b(),q("div",Ta,[y(Le,{flat:""},{default:k(()=>[y(ae,{class:"q-py-none"},{default:k(()=>[y(kl)]),_:1}),y(ae,{class:"q-py-xs"},{default:k(()=>[y($a)]),_:1}),y(ae)]),_:1})]))}};export{Ha as default};
