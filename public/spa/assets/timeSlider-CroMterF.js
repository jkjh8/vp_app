import{s as b,f as C,g as y,o as r,S as k,b as g,e as t,a,w as l,P as o,c as d,p as M,t as P}from"./index-CuBUD28S.js";import{_ as n}from"./delayedTooltip-B4W1B6or.js";import{u as q}from"./useStatus-B0fxNtpW.js";import{u as B}from"./usePlayer-BIH8oGKM.js";import{socket as F}from"./socketio-CKmrsJIW.js";import{Q as T}from"./QSlider-Cbm4KCoU.js";const h={class:"row no-wrap justify-center items-center q-mb-sm q-gutter-x-md"},N={key:0},R={key:1},O={__name:"controlBtns",setup(u){const{pStatus:e}=b(q()),{fnPlay:v,fnStop:m,fnPause:f,fnSetFullscreen:_}=B(),p=C(()=>e.value.player?.[e.value.activePlayerId]||{time:0,duration:0,file:{},is_playing:0}),c=()=>{e.value.repeat==="none"?e.value.repeat="all":e.value.repeat==="all"?e.value.repeat=e.value.playlistMode?"repeat_one":"none":e.value.playlistMode&&e.value.repeat==="repeat_one"?e.value.repeat="single":e.value.repeat==="single"&&(e.value.repeat="none"),F.emit("event",{type:"repeat",value:e.value.repeat})};return(w,s)=>(r(),y("div",h,[t(e).playlistMode?(r(),y("div",N,[a(o,{flat:"",round:"",icon:"fast_rewind",color:"primary"},{default:l(()=>[a(n,{msg:"Rewind"})]),_:1})])):k("",!0),g("div",null,[p.value.is_playing!==1?(r(),d(o,{key:0,flat:"",round:"",icon:"play_arrow",color:"primary",onClick:s[0]||(s[0]=i=>t(v)())},{default:l(()=>[a(n,{msg:"Play"})]),_:1})):(r(),d(o,{key:1,flat:"",round:"",icon:"pause",color:"primary",onClick:t(f)},{default:l(()=>[a(n,{msg:"Pause"})]),_:1},8,["onClick"]))]),g("div",null,[a(o,{flat:"",round:"",icon:"stop",color:"red-10",onClick:s[1]||(s[1]=i=>t(m)())},{default:l(()=>[a(n,{msg:"Stop"})]),_:1})]),t(e).playlistMode?(r(),y("div",R,[a(o,{flat:"",round:"",icon:"fast_forward",color:"primary"},{default:l(()=>[a(n,{msg:"Forward"})]),_:1})])):k("",!0),g("div",null,[t(e).repeat==="none"?(r(),d(o,{key:0,flat:"",round:"",icon:"repeat",color:"grey-5",onClick:c},{default:l(()=>[a(n,{msg:"None"})]),_:1})):t(e).repeat==="all"?(r(),d(o,{key:1,flat:"",round:"",icon:"repeat",color:"primary",onClick:c},{default:l(()=>[a(n,{msg:"Repeat"})]),_:1})):t(e).playlistMode&&t(e).repeat==="repeat_one"?(r(),d(o,{key:2,flat:"",round:"",icon:"repeat_one",color:"primary",onClick:c},{default:l(()=>[a(n,{msg:"Repeat One"})]),_:1})):t(e).repeat==="single"?(r(),d(o,{key:3,flat:"",round:"",icon:"looks_one",color:"primary",onClick:c},{default:l(()=>[a(n,{msg:"Single"})]),_:1})):k("",!0)]),g("div",null,[t(e).player&&t(e).player.fullscreen?(r(),d(o,{key:0,flat:"",round:"",icon:"fullscreen_exit",color:"primary",onClick:s[2]||(s[2]=i=>t(_)(!t(e).player.fullscreen))},{default:l(()=>[a(n,{msg:"Exit Fullscreen"})]),_:1})):(r(),d(o,{key:1,flat:"",round:"",icon:"fullscreen",color:"primary",onClick:s[3]||(s[3]=i=>t(_)(!t(e).player.fullscreen))},{default:l(()=>[a(n,{msg:"Fullscreen"})]),_:1}))])]))}},S=u=>u.toString().padStart(2,"0"),x=u=>{if(!Number.isFinite(u)||u<0)return"00:00:00";let e=Math.floor(u);const v=Math.floor(e/3600)%24,m=Math.floor(e%3600/60),f=e%60;return`${S(v)}:${S(m)}:${S(f)}`},V={class:"row no-wrap q-pt-none q-mt-none q-px-md q-gutter-x-sm items-center"},E={key:0,class:"gt-xs text-caption"},z={__name:"timeSlider",props:{time:{type:Boolean,default:!0}},setup(u){const{pStatus:e}=b(q()),{fnUpdateTime:v}=B(),m=M(0),f=M(!1),_=u,p=C(()=>e.value.player?.[e.value.activePlayerId]||{time:0,duration:0,file:{}}),c=C(()=>p.value?.file?.is_image??!1),w=i=>{m.value=i,!f.value&&!c.value&&v(m.value)},s=i=>{try{if(c.value)return;i==="start"?f.value=!0:i==="end"&&(f.value=!1,v(m.value))}catch($){console.error("Error during panning:",$)}};return(i,$)=>(r(),y("div",V,[a(T,{class:"q-mt-none q-pt-none","model-value":p.value.time/1e3,min:0,step:.01,max:p.value.duration/1e3,label:"","label-value":t(x)(p.value.time/1e3),"onUpdate:modelValue":w,onPan:s,disable:c.value},null,8,["model-value","max","label-value","disable"]),_.time?(r(),y("div",E,P(t(x)(p.value.time/1e3))+"/"+P(t(x)(p.value.duration/1e3)),1)):k("",!0)]))}};export{z as _,O as a,x as m};
