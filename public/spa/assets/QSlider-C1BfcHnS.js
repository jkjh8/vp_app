import{az as Be,Z as Re,j as ae,_ as Fe,n as y,q as t,a6 as ze,a8 as E,x as Ie,au as Ne,z as c,aC as Ae,ae as Ve,i as Pe,aG as De,v as je,ao as Ee}from"./index-D06vnydI.js";import{T as Ke}from"./TouchPan-Bk3tvTHN.js";import{b as q}from"./format-CJebrXOQ.js";const ee="q-slider__marker-labels",Oe=r=>({value:r}),Qe=({marker:r})=>c("div",{key:r.value,style:r.style,class:r.classes},r.label),te=[34,37,40,33,39,38],Ge={...Re,...Be,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:r=>r>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Ue=["pan","update:modelValue","change"];function We({updateValue:r,updatePosition:k,getDragging:L,formAttrs:o}){const{props:e,emit:w,slots:S,proxy:{$q:v}}=ae(),_=Fe(e,v),z=Ae(o),m=y(!1),$=y(!1),b=y(!1),M=y(!1),d=t(()=>e.vertical===!0?"--v":"--h"),I=t(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),p=t(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(v.lang.rtl===!0)),f=t(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),C=t(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),u=t(()=>e.disable!==!0&&e.readonly!==!0&&f.value<C.value),g=t(()=>{if(e.step===0)return l=>l;const a=(String(e.step).trim().split(".")[1]||"").length;return l=>parseFloat(l.toFixed(a))}),x=t(()=>e.step===0?1:e.step),le=t(()=>u.value===!0?e.tabindex||0:-1),T=t(()=>e.max-e.min),K=t(()=>C.value-f.value),B=t(()=>A(f.value)),N=t(()=>A(C.value)),R=t(()=>e.vertical===!0?p.value===!0?"bottom":"top":p.value===!0?"right":"left"),O=t(()=>e.vertical===!0?"height":"width"),re=t(()=>e.vertical===!0?"width":"height"),Q=t(()=>e.vertical===!0?"vertical":"horizontal"),ne=t(()=>{const a={role:"slider","aria-valuemin":f.value,"aria-valuemax":C.value,"aria-orientation":Q.value,"data-step":e.step};return e.disable===!0?a["aria-disabled"]="true":e.readonly===!0&&(a["aria-readonly"]="true"),a}),oe=t(()=>`q-slider q-slider${d.value} q-slider--${m.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(u.value===!0?" q-slider--editable":""))+(b.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+(_.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+d.value:""));function F(a){const l="q-slider__"+a;return`${l} ${l}${d.value} ${l}${d.value}${I.value}`}function G(a){const l="q-slider__"+a;return`${l} ${l}${d.value}`}const se=t(()=>{const a=e.selectionColor||e.color;return"q-slider__selection absolute"+(a!==void 0?` text-${a}`:"")}),ue=t(()=>G("markers")+" absolute overflow-hidden"),ie=t(()=>G("track-container")),ce=t(()=>F("pin")),ve=t(()=>F("label")),de=t(()=>F("text-container")),me=t(()=>F("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),be=t(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),fe=t(()=>{const a={[re.value]:e.trackSize};return e.trackImg!==void 0&&(a.backgroundImage=`url(${e.trackImg}) !important`),a}),ke=t(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),U=t(()=>{const a=N.value-B.value,l={[R.value]:`${100*B.value}%`,[O.value]:a===0?"2px":`${100*a}%`};return e.innerTrackImg!==void 0&&(l.backgroundImage=`url(${e.innerTrackImg}) !important`),l});function pe(a){const{min:l,max:n,step:s}=e;let i=l+a*(n-l);if(s>0){const h=(i-f.value)%s;i+=(Math.abs(h)>=s/2?(h<0?-1:1)*s:0)-h}return i=g.value(i),q(i,f.value,C.value)}function A(a){return T.value===0?0:(a-e.min)/T.value}function Ce(a,l){const n=Ne(a),s=e.vertical===!0?q((n.top-l.top)/l.height,0,1):q((n.left-l.left)/l.width,0,1);return q(p.value===!0?1-s:s,B.value,N.value)}const W=t(()=>ze(e.markers)===!0?e.markers:x.value),X=t(()=>{const a=[],l=W.value,n=e.max;let s=e.min;do a.push(s),s+=l;while(s<n);return a.push(n),a}),Z=t(()=>{const a=` ${ee}${d.value}-`;return ee+`${a}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${a}${p.value===!0?"rtl":"ltr"}`}),V=t(()=>e.markerLabels===!1?null:he(e.markerLabels).map((a,l)=>({index:l,value:a.value,label:a.label||a.value,classes:Z.value+(a.classes!==void 0?" "+a.classes:""),style:{...J(a.value),...a.style||{}}}))),H=t(()=>({markerList:V.value,markerMap:xe.value,classes:Z.value,getStyle:J})),ge=t(()=>{const a=K.value===0?"2px":100*W.value/K.value;return{...U.value,backgroundSize:e.vertical===!0?`2px ${a}%`:`${a}% 2px`}});function he(a){if(a===!1)return null;if(a===!0)return X.value.map(Oe);if(typeof a=="function")return X.value.map(n=>{const s=a(n);return E(s)===!0?{...s,value:n}:{value:n,label:s}});const l=({value:n})=>n>=e.min&&n<=e.max;return Array.isArray(a)===!0?a.map(n=>E(n)===!0?n:{value:n}).filter(l):Object.keys(a).map(n=>{const s=a[n],i=Number(n);return E(s)===!0?{...s,value:i}:{value:i,label:s}}).filter(l)}function J(a){return{[R.value]:`${100*(a-e.min)/T.value}%`}}const xe=t(()=>{if(e.markerLabels===!1)return null;const a={};return V.value.forEach(l=>{a[l.value]=l}),a});function ye(){if(S["marker-label-group"]!==void 0)return S["marker-label-group"](H.value);const a=S["marker-label"]||Qe;return V.value.map(l=>a({marker:l,...H.value}))}const Se=t(()=>[[Ke,$e,void 0,{[Q.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function $e(a){a.isFinal===!0?(M.value!==void 0&&(k(a.evt),a.touch===!0&&r(!0),M.value=void 0,w("pan","end")),m.value=!1,b.value=!1):a.isFirst===!0?(M.value=L(a.evt),k(a.evt),r(),m.value=!0,w("pan","start")):(k(a.evt),r())}function Y(){b.value=!1}function Me(a){k(a,L(a)),r(),$.value=!0,m.value=!0,document.addEventListener("mouseup",P,!0)}function P(){$.value=!1,m.value=!1,r(!0),Y(),document.removeEventListener("mouseup",P,!0)}function qe(a){k(a,L(a)),r(!0)}function Le(a){te.includes(a.keyCode)&&r(!0)}function we(a){if(e.vertical===!0)return null;const l=v.lang.rtl!==e.reverse?1-a:a;return{transform:`translateX(calc(${2*l-1} * ${e.thumbSize} / 2 + ${50-100*l}%))`}}function _e(a){const l=t(()=>$.value===!1&&(b.value===a.focusValue||b.value==="both")?" q-slider--focus":""),n=t(()=>`q-slider__thumb q-slider__thumb${d.value} q-slider__thumb${d.value}-${p.value===!0?"rtl":"ltr"} absolute non-selectable`+l.value+(a.thumbColor.value!==void 0?` text-${a.thumbColor.value}`:"")),s=t(()=>({width:e.thumbSize,height:e.thumbSize,[R.value]:`${100*a.ratio.value}%`,zIndex:b.value===a.focusValue?2:void 0})),i=t(()=>a.labelColor.value!==void 0?` text-${a.labelColor.value}`:""),h=t(()=>we(a.ratio.value)),D=t(()=>"q-slider__text"+(a.labelTextColor.value!==void 0?` text-${a.labelTextColor.value}`:""));return()=>{const j=[c("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[c("path",{d:e.thumbPath})]),c("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(j.push(c("div",{class:ce.value+" absolute fit no-pointer-events"+i.value},[c("div",{class:ve.value,style:{minWidth:e.thumbSize}},[c("div",{class:de.value,style:h.value},[c("span",{class:D.value},a.label.value)])])])),e.name!==void 0&&e.disable!==!0&&z(j,"push")),c("div",{class:n.value,style:s.value,...a.getNodeData()},j)}}function Te(a,l,n,s){const i=[];e.innerTrackColor!=="transparent"&&i.push(c("div",{key:"inner",class:ke.value,style:U.value})),e.selectionColor!=="transparent"&&i.push(c("div",{key:"selection",class:se.value,style:a.value})),e.markers!==!1&&i.push(c("div",{key:"marker",class:ue.value,style:ge.value})),s(i);const h=[Ve("div",{key:"trackC",class:ie.value,tabindex:l.value,...n.value},[c("div",{class:be.value,style:fe.value},i)],"slide",u.value,()=>Se.value)];if(e.markerLabels!==!1){const D=e.switchMarkerLabelsSide===!0?"unshift":"push";h[D](c("div",{key:"markerL",class:me.value},ye()))}return h}return Ie(()=>{document.removeEventListener("mouseup",P,!0)}),{state:{active:m,focus:b,preventFocus:$,dragging:M,editable:u,classes:oe,tabindex:le,attributes:ne,roundValueFn:g,keyStep:x,trackLen:T,innerMin:f,innerMinRatio:B,innerMax:C,innerMaxRatio:N,positionProp:R,sizeProp:O,isReversed:p},methods:{onActivate:Me,onMobileClick:qe,onBlur:Y,onKeyup:Le,getContent:Te,getThumbRenderFn:_e,convertRatioToModel:pe,convertModelToRatio:A,getDraggingRatio:Ce}}}const Xe=()=>({}),Ye=Pe({name:"QSlider",props:{...Ge,modelValue:{required:!0,default:null,validator:r=>typeof r=="number"||r===null},labelValue:[String,Number]},emits:Ue,setup(r,{emit:k}){const{proxy:{$q:L}}=ae(),{state:o,methods:e}=We({updateValue:d,updatePosition:p,getDragging:I,formAttrs:De(r)}),w=y(null),S=y(0),v=y(0);function _(){v.value=r.modelValue===null?o.innerMin.value:q(r.modelValue,o.innerMin.value,o.innerMax.value)}je(()=>`${r.modelValue}|${o.innerMin.value}|${o.innerMax.value}`,_),_();const z=t(()=>e.convertModelToRatio(v.value)),m=t(()=>o.active.value===!0?S.value:z.value),$=t(()=>{const u={[o.positionProp.value]:`${100*o.innerMinRatio.value}%`,[o.sizeProp.value]:`${100*(m.value-o.innerMinRatio.value)}%`};return r.selectionImg!==void 0&&(u.backgroundImage=`url(${r.selectionImg}) !important`),u}),b=e.getThumbRenderFn({focusValue:!0,getNodeData:Xe,ratio:m,label:t(()=>r.labelValue!==void 0?r.labelValue:v.value),thumbColor:t(()=>r.thumbColor||r.color),labelColor:t(()=>r.labelColor),labelTextColor:t(()=>r.labelTextColor)}),M=t(()=>o.editable.value!==!0?{}:L.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:f,onBlur:e.onBlur,onKeydown:C,onKeyup:e.onKeyup});function d(u){v.value!==r.modelValue&&k("update:modelValue",v.value),u===!0&&k("change",v.value)}function I(){return w.value.getBoundingClientRect()}function p(u,g=o.dragging.value){const x=e.getDraggingRatio(u,g);v.value=e.convertRatioToModel(x),S.value=r.snap!==!0||r.step===0?x:e.convertModelToRatio(v.value)}function f(){o.focus.value=!0}function C(u){if(te.includes(u.keyCode)===!1)return;Ee(u);const g=([34,33].includes(u.keyCode)?10:1)*o.keyStep.value,x=([34,37,40].includes(u.keyCode)?-1:1)*(o.isReversed.value===!0?-1:1)*(r.vertical===!0?-1:1)*g;v.value=q(o.roundValueFn.value(v.value+x),o.innerMin.value,o.innerMax.value),d()}return()=>{const u=e.getContent($,o.tabindex,M,g=>{g.push(b())});return c("div",{ref:w,class:o.classes.value+(r.modelValue===null?" q-slider--no-value":""),...o.attributes.value,"aria-valuenow":r.modelValue},u)}}});export{Ye as Q};
